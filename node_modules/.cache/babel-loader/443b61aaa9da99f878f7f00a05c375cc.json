{"ast":null,"code":"import _regeneratorRuntime from\"/home/fabricio7p/Documents/Projects/Ikebana/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fabricio7p/Documents/Projects/Ikebana/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fabricio7p/Documents/Projects/Ikebana/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import api from'../../../services/api';import{useLocation,useHistory}from'react-router-dom';import{useDispatch}from'react-redux';import{storeAuth}from'store/ducks/auth.js';import Modal from'../../aux/Modal';import ErrorDialog from'../../aux/ErrorDialog/ErrorDialog';export default function Oauth(){var location=useLocation();var history=useHistory();var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var loginOauth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_response$data,key,refresh_key;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api({method:'get',url:\"/callback\".concat(location.search)});case 3:response=_context.sent;_response$data=response.data,key=_response$data.key,refresh_key=_response$data.refresh_key;dispatch(storeAuth({key:key,refresh_key:refresh_key}));history.push('/login');_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setError('Erro interno, pode já haver uma conta com este endereço de e-mail');case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function loginOauth(){return _ref.apply(this,arguments);};}();useEffect(function(){loginOauth();},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"logout-main\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"logout-main__text\"},\"Voc\\xEA est\\xE1 sendo redirecionado...\")),error&&/*#__PURE__*/React.createElement(ErrorDialog,{handler:function handler(){return history.push('/login');},value:error}));}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/Frontend/src/components/pages/Login/Oauth.js"],"names":["React","useState","useEffect","api","useLocation","useHistory","useDispatch","storeAuth","Modal","ErrorDialog","Oauth","location","history","dispatch","error","setError","loginOauth","method","url","search","response","data","key","refresh_key","push"],"mappings":"8fAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAAyBC,SAAzB,KAA0C,OAA1C,CACA,MAAOC,CAAAA,GAAP,KAAgB,uBAAhB,CACA,OAASC,WAAT,CAAsBC,UAAtB,KAAwC,kBAAxC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,SAAT,KAA0B,qBAA1B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,iBAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,mCAAxB,CAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,CAC5B,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CACA,GAAMQ,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CACA,GAAMQ,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CAH4B,cAIFL,QAAQ,CAAC,KAAD,CAJN,wCAIrBa,KAJqB,eAIdC,QAJc,eAM5B,GAAMC,CAAAA,UAAU,0FAAG,qNAEYb,CAAAA,GAAG,CAAC,CACvBc,MAAM,CAAE,KADe,CAEvBC,GAAG,oBAAcP,QAAQ,CAACQ,MAAvB,CAFoB,CAAD,CAFf,QAELC,QAFK,8BAMkBA,QAAQ,CAACC,IAN3B,CAMHC,GANG,gBAMHA,GANG,CAMEC,WANF,gBAMEA,WANF,CAOXV,QAAQ,CAACN,SAAS,CAAC,CAACe,GAAG,CAAHA,GAAD,CAAMC,WAAW,CAAXA,WAAN,CAAD,CAAV,CAAR,CACAX,OAAO,CAACY,IAAR,CAAa,QAAb,EARW,+EAUXT,QAAQ,CAAC,mEAAD,CAAR,CAVW,oEAAH,kBAAVC,CAAAA,UAAU,0CAAhB,CAcAd,SAAS,CAAC,UAAM,CACZc,UAAU,GACb,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACI,qDACI,2BAAK,SAAS,CAAC,aAAf,eACI,0BAAI,SAAS,CAAC,mBAAd,2CADJ,CADJ,CAKQF,KAAK,eACD,oBAAC,WAAD,EAAa,OAAO,CAAE,yBAAMF,CAAAA,OAAO,CAACY,IAAR,CAAa,QAAb,CAAN,EAAtB,CAAoD,KAAK,CAAEV,KAA3D,EANZ,CADJ,CAWH","sourcesContent":["import React, { useState,useEffect } from 'react';\nimport api from '../../../services/api';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { storeAuth } from 'store/ducks/auth.js'\n\nimport Modal from '../../aux/Modal';\nimport ErrorDialog from '../../aux/ErrorDialog/ErrorDialog';\n\nexport default function Oauth() {\n    const location = useLocation();\n    const history = useHistory();\n    const dispatch = useDispatch();\n    const [error, setError] = useState(false);\n\n    const loginOauth = async () => {\n        try {\n            const response = await api({\n                method: 'get',\n                url: `/callback${location.search}`\n            })\n            const { key, refresh_key } = response.data\n            dispatch(storeAuth({key, refresh_key}))\n            history.push('/login')\n        } catch(e) {\n            setError('Erro interno, pode já haver uma conta com este endereço de e-mail')\n        }\n    }\n\n    useEffect(() => {\n        loginOauth()\n    }, [])\n\n    return(\n        <>\n            <div className=\"logout-main\">\n                <h1 className=\"logout-main__text\">Você está sendo redirecionado...</h1>\n            </div>\n            {\n                error &&\n                    <ErrorDialog handler={() => history.push('/login')} value={error} />\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}