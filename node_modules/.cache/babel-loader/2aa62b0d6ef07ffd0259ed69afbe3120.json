{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/reactapp/src/components/pages/Account/components/Join/Join.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api';\nimport { useForm } from 'react-hook-form';\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\nimport InfoDialog from '../../../../aux/InfoDialog/InfoDialog';\nimport './styles.scss';\nexport default function Join() {\n  const {\n    register,\n    handleSubmit,\n    errors,\n    watch\n  } = useForm();\n  const authKey = useSelector(state => state.auth.keys);\n  const userData = useSelector(state => state.account.userData[0]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [info, setInfo] = useState(false);\n  const [data, setData] = useState({});\n\n  const onSubmit = async ({\n    city,\n    tel,\n    personal_address,\n    location,\n    work_address,\n    accept\n  }) => {\n    setLoading(true);\n\n    try {\n      if (accept) {\n        const response = await api({\n          method: 'post',\n          url: '/become_partner',\n          headers: {\n            'Authorization': `Bearer ${authKey[0].key}`\n          },\n          data: {\n            city,\n            tel,\n            personal_address,\n            location,\n            work_address\n          }\n        });\n        response.data.response && setInfo('Dados Atualizados');\n        response.data.success && setInfo('Você virou membro');\n      }\n    } catch (e) {\n      window.location.pathname = '/refresh';\n    } finally {\n      setLoading(false);\n    }\n  }; //loading user data\n\n\n  useEffect(() => {\n    setData(userData);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"join__header--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }, \"Por favor complete os dados para poder ser um membro do projeto.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__inputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"edit__inputs--desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 25\n    }\n  }, \"Informa\\xE7\\xF5es pessoais.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"city\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, \"Cidade\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    id: \"city\",\n    name: \"city\",\n    defaultValue: data.city,\n    ref: register({\n      required: true,\n      maxLength: 25\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"tel\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 29\n    }\n  }, \"Telefone\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    name: \"tel\",\n    defaultValue: data.tel,\n    ref: register({\n      required: true,\n      maxLength: 15\n    }),\n    id: \"tel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"personal_address\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, \"Endere\\xE7o\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    name: \"personal_address\",\n    defaultValue: data.personal_address,\n    ref: register({\n      required: true\n    }),\n    id: \"personal_address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"join__inputs--desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, \"Informa\\xE7\\xF5es do local que frequenta.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"location\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, \"Local\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    id: \"location\",\n    name: \"location\",\n    defaultValue: data.location,\n    ref: register({\n      required: true\n    }),\n    placeholder: \"Ex. Johrei Center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"work_address\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, \"Endere\\xE7o\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    id: \"work_address\",\n    name: \"work_address\",\n    defaultValue: data.work_address,\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__agreement\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"join__agreement--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, \"Como membro voc\\xEA poder\\xE1 contribuir com o conte\\xFAdo do website, adicionar aulas sobre o m\\xE9todo Sanguetsu e publicar seus arranjos. Tamb\\xE9m poder\\xE1 atender a solicita\\xE7\\xF5es de arranjos de pessoas da sua regi\\xE3o.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"join__agreement--check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, errors.accept && /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 48\n    }\n  }, \"error_outline\"), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"accept\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, userData.isPartner === true ? 'Confirmar atualização' : 'Quero ser membro'), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: \"accept\",\n    name: \"accept\",\n    ref: register({\n      required: true\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"app-btn btn-filled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 56\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 67\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 56\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 67\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 37\n    }\n  }, userData.isPartner === true ? 'Atualizar' : 'Concluir')))))), error && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ErrorDialog, {\n    value: error,\n    handler: () => {\n      setError(false);\n      window.location.pathname = '/logout';\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  })), info && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InfoDialog, {\n    value: info,\n    handler: () => {\n      setInfo(false);\n      window.location.pathname = '/home';\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  })));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/reactapp/src/components/pages/Account/components/Join/Join.js"],"names":["React","useEffect","useState","useDispatch","useSelector","api","useForm","Modal","ErrorDialog","InfoDialog","Join","register","handleSubmit","errors","watch","authKey","state","auth","keys","userData","account","loading","setLoading","error","setError","info","setInfo","data","setData","onSubmit","city","tel","personal_address","location","work_address","accept","response","method","url","headers","key","success","e","window","pathname","required","maxLength","color","isPartner"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,WAAP,MAAwB,yCAAxB;AACA,OAAOC,UAAP,MAAuB,uCAAvB;AAEA,OAAO,eAAP;AAEA,eAAe,SAASC,IAAT,GAAgB;AAC3B,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA0BC,IAAAA,MAA1B;AAAkCC,IAAAA;AAAlC,MAA4CR,OAAO,EAAzD;AACA,QAAMS,OAAO,GAAGX,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACC,IAAN,CAAWC,IAArB,CAA3B;AACA,QAAMC,QAAQ,GAAGf,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACI,OAAN,CAAcD,QAAd,CAAuB,CAAvB,CAAV,CAA5B;AACA,QAAM,CAACE,OAAD,EAAUC,UAAV,IAAwBpB,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACqB,KAAD,EAAQC,QAAR,IAAoBtB,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACuB,IAAD,EAAOC,OAAP,IAAkBxB,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACyB,IAAD,EAAOC,OAAP,IAAkB1B,QAAQ,CAAC,EAAD,CAAhC;;AAEA,QAAM2B,QAAQ,GAAG,OAAO;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,GAAR;AAAaC,IAAAA,gBAAb;AAA+BC,IAAAA,QAA/B;AAAyCC,IAAAA,YAAzC;AAAuDC,IAAAA;AAAvD,GAAP,KAA0E;AACvFb,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAI;AACA,UAAIa,MAAJ,EAAY;AACR,cAAMC,QAAQ,GAAG,MAAM/B,GAAG,CAAC;AACvBgC,UAAAA,MAAM,EAAE,MADe;AAEvBC,UAAAA,GAAG,EAAE,iBAFkB;AAGvBC,UAAAA,OAAO,EAAE;AACL,6BAAkB,UAASxB,OAAO,CAAC,CAAD,CAAP,CAAWyB,GAAI;AADrC,WAHc;AAMvBb,UAAAA,IAAI,EAAE;AACFG,YAAAA,IADE;AAEFC,YAAAA,GAFE;AAGFC,YAAAA,gBAHE;AAIFC,YAAAA,QAJE;AAKFC,YAAAA;AALE;AANiB,SAAD,CAA1B;AAcAE,QAAAA,QAAQ,CAACT,IAAT,CAAcS,QAAd,IAA0BV,OAAO,CAAC,mBAAD,CAAjC;AACAU,QAAAA,QAAQ,CAACT,IAAT,CAAcc,OAAd,IAAyBf,OAAO,CAAC,mBAAD,CAAhC;AACH;AACJ,KAnBD,CAmBE,OAAMgB,CAAN,EAAS;AACPC,MAAAA,MAAM,CAACV,QAAP,CAAgBW,QAAhB,GAA2B,UAA3B;AACH,KArBD,SAqBU;AACNtB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GA1BD,CAT2B,CAqC3B;;;AACArB,EAAAA,SAAS,CAAC,MAAM;AACZ2B,IAAAA,OAAO,CAACT,QAAD,CAAP;AACH,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACI,uDACI;AAAM,IAAA,QAAQ,EAAEP,YAAY,CAACiB,QAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wEADJ,CADJ,eAII;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCADJ,eAEI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,MAAf;AACI,IAAA,SAAS,EAAC,8BADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAGI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,SAAS,EAAC,eAA7B;AAA6C,IAAA,EAAE,EAAC,MAAhD;AAAuD,IAAA,IAAI,EAAC,MAA5D;AACI,IAAA,YAAY,EAAEF,IAAI,CAACG,IADvB;AAEI,IAAA,GAAG,EAAGnB,QAAQ,CAAC;AAAEkC,MAAAA,QAAQ,EAAE,IAAZ;AAAkBC,MAAAA,SAAS,EAAE;AAA7B,KAAD,CAFlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CAFJ,eASI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,KAAf;AACI,IAAA,SAAS,EAAC,8BADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,SAAS,EAAC,eAA7B;AAA6C,IAAA,IAAI,EAAC,KAAlD;AACI,IAAA,YAAY,EAAEnB,IAAI,CAACI,GADvB;AAEI,IAAA,GAAG,EAAGpB,QAAQ,CAAC;AAAEkC,MAAAA,QAAQ,EAAE,IAAZ;AAAkBC,MAAAA,SAAS,EAAE;AAA7B,KAAD,CAFlB;AAGI,IAAA,EAAE,EAAC,KAHP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CATJ,eAkBI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,kBAAf;AACI,IAAA,SAAS,EAAC,8BADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,eAII;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,SAAS,EAAC,eAA7B;AAA6C,IAAA,IAAI,EAAC,kBAAlD;AACI,IAAA,YAAY,EAAEnB,IAAI,CAACK,gBADvB;AACyC,IAAA,GAAG,EAAGrB,QAAQ,CAAC;AAAEkC,MAAAA,QAAQ,EAAE;AAAZ,KAAD,CADvD;AAEI,IAAA,EAAE,EAAC,kBAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CAlBJ,eA0BI;AAAG,IAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDA1BJ,eA2BI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,UAAf;AACI,IAAA,SAAS,EAAC,8BADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAGI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,SAAS,EAAC,eAA7B;AAA6C,IAAA,EAAE,EAAC,UAAhD;AAA2D,IAAA,IAAI,EAAC,UAAhE;AACI,IAAA,YAAY,EAAElB,IAAI,CAACM,QADvB;AACiC,IAAA,GAAG,EAAGtB,QAAQ,CAAC;AAAEkC,MAAAA,QAAQ,EAAE;AAAZ,KAAD,CAD/C;AAEI,IAAA,WAAW,EAAC,mBAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CA3BJ,eAkCI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,cAAf;AACI,IAAA,SAAS,EAAC,8BADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,eAII;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,SAAS,EAAC,eAA7B;AAA6C,IAAA,EAAE,EAAC,cAAhD;AAA+D,IAAA,IAAI,EAAC,cAApE;AACI,IAAA,YAAY,EAAElB,IAAI,CAACO,YADvB;AACqC,IAAA,GAAG,EAAGvB,QAAQ,CAAC;AAAEkC,MAAAA,QAAQ,EAAE;AAAZ,KAAD,CADnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,CAlCJ,CAJJ,eA8CI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,SAAS,EAAC,uBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8OADJ,eAII;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACMhC,MAAM,CAACsB,MAAP,iBAAiB;AAAG,IAAA,SAAS,EAAC,gBAAb;AAA8B,IAAA,KAAK,EAAE;AAACY,MAAAA,KAAK,EAAE;AAAR,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADvB,eAEI;AAAO,IAAA,OAAO,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyB5B,QAAQ,CAAC6B,SAAT,KAAuB,IAAvB,GAA8B,uBAA9B,GAAwD,kBAAjF,CAFJ,eAGI;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,EAAE,EAAC,QAA1B;AAAmC,IAAA,IAAI,EAAC,QAAxC;AAAiD,IAAA,GAAG,EAAGrC,QAAQ,CAAC;AAAEkC,MAAAA,QAAQ,EAAE;AAAZ,KAAD,CAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,eAII;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,oBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQxB,OAAO,KAAK,IAAZ,gBAAmB;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACf;AAAK,IAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA1B,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eACe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADf,eAC0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD1B,CADe,CAAnB,gBAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKF,QAAQ,CAAC6B,SAAT,KAAuB,IAAvB,GAA8B,WAA9B,GAA4C,UAAjD,CAPR,CAJJ,CAJJ,CA9CJ,CADJ,CADJ,EAuEQzB,KAAK,iBACD,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AAAa,IAAA,KAAK,EAAEA,KAApB;AAA2B,IAAA,OAAO,EAAE,MAAK;AACrCC,MAAAA,QAAQ,CAAC,KAAD,CAAR;AACAmB,MAAAA,MAAM,CAACV,QAAP,CAAgBW,QAAhB,GAA2B,SAA3B;AACH,KAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAxEZ,EAgFQnB,IAAI,iBACA,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAEA,IAAnB;AAAyB,IAAA,OAAO,EAAE,MAAM;AACpCC,MAAAA,OAAO,CAAC,KAAD,CAAP;AACAiB,MAAAA,MAAM,CAACV,QAAP,CAAgBW,QAAhB,GAA2B,OAA3B;AACH,KAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAjFZ,CADJ;AA2FH","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api'\nimport { useForm } from 'react-hook-form';\n\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\nimport InfoDialog from '../../../../aux/InfoDialog/InfoDialog';\n\nimport './styles.scss';\n\nexport default function Join() {\n    const { register, handleSubmit, errors, watch } = useForm();\n    const authKey = useSelector(state => state.auth.keys)\n    const userData = useSelector(state => state.account.userData[0])\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [info, setInfo] = useState(false);\n    const [data, setData] = useState({})\n\n    const onSubmit = async ({ city, tel, personal_address, location, work_address, accept}) => {\n        setLoading(true)\n        try {\n            if (accept) {\n                const response = await api({\n                    method: 'post',\n                    url: '/become_partner',\n                    headers: {\n                        'Authorization': `Bearer ${authKey[0].key}`\n                    },\n                    data: {\n                        city,\n                        tel,\n                        personal_address,\n                        location,\n                        work_address,\n                    }\n                })\n                response.data.response && setInfo('Dados Atualizados')\n                response.data.success && setInfo('Você virou membro')\n            }\n        } catch(e) {\n            window.location.pathname = '/refresh'\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    //loading user data\n    useEffect(() => {\n        setData(userData)\n    }, [])\n\n    return(\n        <>\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"join\">\n                    <div className=\"join__header\">\n                        <p className=\"join__header--title\">Por favor complete os dados para poder ser um membro do projeto.</p>\n                    </div>\n                    <div className=\"join__inputs\">\n                        <p className=\"edit__inputs--desc\">Informações pessoais.</p>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"city\" \n                                className=\"input-label acc-field__title\">Cidade</label>\n                            <input type=\"text\" className=\"account-input\" id=\"city\" name=\"city\" \n                                defaultValue={data.city}\n                                ref={ register({ required: true, maxLength: 25 }) }/>\n                        </div>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"tel\" \n                                className=\"input-label acc-field__title\">\n                                Telefone</label>\n                            <input type=\"text\" className=\"account-input\" name=\"tel\" \n                                defaultValue={data.tel}\n                                ref={ register({ required: true, maxLength: 15 }) } \n                                id=\"tel\"/>\n                        </div>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"personal_address\" \n                                className=\"input-label acc-field__title\">\n                                Endereço</label>\n                            <input type=\"text\" className=\"account-input\" name=\"personal_address\" \n                                defaultValue={data.personal_address} ref={ register({ required: true }) }\n                                id=\"personal_address\"/>\n                        </div>\n                        <p className=\"join__inputs--desc\">Informações do local que frequenta.</p>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"location\" \n                                className=\"input-label acc-field__title\">Local</label>\n                            <input type=\"text\" className=\"account-input\" id=\"location\" name=\"location\" \n                                defaultValue={data.location} ref={ register({ required: true }) }\n                                placeholder=\"Ex. Johrei Center\"/>\n                        </div>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"work_address\" \n                                className=\"input-label acc-field__title\">\n                                Endereço</label>\n                            <input type=\"text\" className=\"account-input\" id=\"work_address\" name=\"work_address\" \n                                defaultValue={data.work_address} ref={ register({ required: true }) }/>\n                        </div>\n                    </div>\n                    <div className=\"join__agreement\">\n                        <p className=\"join__agreement--text\">Como membro você poderá contribuir com o conteúdo \n                            do website, adicionar aulas sobre o método Sanguetsu e publicar seus arranjos. Também \n                            poderá atender a solicitações de arranjos de pessoas da sua região.</p>\n                        <div className=\"join__agreement--check\">\n                            { errors.accept && <i className=\"material-icons\" style={{color: \"red\"}}>error_outline</i> }\n                            <label htmlFor=\"accept\">{userData.isPartner === true ? 'Confirmar atualização' : 'Quero ser membro'}</label>\n                            <input type=\"checkbox\" id=\"accept\" name=\"accept\" ref={ register({ required: true }) }/>\n                            <button type=\"submit\" className=\"app-btn btn-filled\">\n                                {\n                                    loading === true ? <div className=\"sizer\">\n                                        <div class=\"lds-ellipsis\"><div></div>\n                                            <div></div><div></div><div></div></div>\n                                    </div>\n                                    :\n                                    <p>{ userData.isPartner === true ? 'Atualizar' : 'Concluir' }</p>\n                                }\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </form>\n            {\n                error &&\n                    <Modal>\n                        <ErrorDialog value={error} handler={() =>{\n                            setError(false)\n                            window.location.pathname = '/logout'\n                        } }/>\n                    </Modal>\n            }\n            {\n                info &&\n                    <Modal>\n                        <InfoDialog value={info} handler={() => {\n                            setInfo(false)\n                            window.location.pathname = '/home'\n                        }}/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}