{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/reactapp/src/components/pages/Login/Login.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport api from '../../../services/api';\nimport { storeAuth } from 'store/ducks/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport Modal from '../../aux/Modal';\nimport ErrorDialog from '../../aux/ErrorDialog/ErrorDialog';\nimport IndexFooter from './IndexFooter/IndexFooter';\nimport './styles.scss';\nexport default function Login() {\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const authKey = useSelector(state => state.auth.keys);\n\n  const onSubmit = async ({\n    email,\n    password\n  }) => {\n    setLoading(true);\n\n    try {\n      const response = await api({\n        method: 'post',\n        url: '/login',\n        data: {\n          email,\n          password\n        }\n      });\n      const {\n        key,\n        refresh_key\n      } = response.data;\n      dispatch(storeAuth({\n        key,\n        refresh_key\n      }));\n      history.push('/explore');\n    } catch (e) {\n      e.message.includes('403') && setError('E-mail inserido ainda não foi confirmado');\n      e.message.includes('401') && setError('E-mail ou senha inválido(s)');\n      e.message.includes('400') && setError('E-mail já registrado, clique em entrar usando sua conta Google');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const oAuth = async () => {\n    try {\n      const response = await api({\n        method: 'get',\n        url: '/oauth_login'\n      });\n      console.log(response.data.request_uri);\n      window.location.replace(response.data.request_uri);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    if (authKey.length !== 0) {\n      history.push('/explore');\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"ike-logo\",\n    src: \"https://ikebana-app-content.s3-sa-east-1\" + \".amazonaws.com/static/mainlogo.png\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-main__inputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"login-input\",\n    name: \"email\",\n    type: \"text\",\n    ref: register({\n      required: true\n    }),\n    placeholder: \"Usu\\xE1rio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 37\n    }\n  }), errors.email && /*#__PURE__*/React.createElement(\"div\", {\n    title: \"Campo necess\\xE1rio\",\n    className: \"validation-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 54\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 72\n    }\n  }, \"error_outline\"))), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"login-input\",\n    name: \"password\",\n    type: \"password\",\n    ref: register,\n    placeholder: \"Senha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"login-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 56\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 71\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 56\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 67\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 37\n    }\n  }, \"Entrar\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-main__spacer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spacer-h\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"login-main__spacer--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, \"OU\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spacer-h\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-main__external\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => oAuth(),\n    className: \"login-google\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 56\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 71\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 56\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 67\n    }\n  }))) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"login-google--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 37\n    }\n  }, \"Entrar usando\"), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"google-logo\",\n    src: \"https://image.flaticon.com/icons/svg/281/281764.svg\",\n    alt: \"Google\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-main__forgot\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"forgot-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/forgot_pass\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 33\n    }\n  }, \"Esqueceu sua senha?\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-bottom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"login-bottom--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, \"N\\xE3o tem uma conta?\", /*#__PURE__*/React.createElement(\"button\", {\n    className: \"register-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 33\n    }\n  }, \"Criar\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"get-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }, \"Em breve...\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-get-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"appstore-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://ikebana-app-content.s3-sa-east-1.amazonaws.com/static/app-store-badge.png\",\n    alt: \"App store\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"playstore-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://play.google.com/intl/pt-BR/badges/static/images/badges/pt-br_badge_web_generic.png\",\n    alt: \"Play store\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(IndexFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  })), error && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ErrorDialog, {\n    handler: () => setError(false),\n    value: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  })));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/reactapp/src/components/pages/Login/Login.js"],"names":["React","useState","useEffect","Link","useHistory","api","storeAuth","useDispatch","useSelector","useForm","Modal","ErrorDialog","IndexFooter","Login","register","handleSubmit","errors","loading","setLoading","error","setError","dispatch","history","authKey","state","auth","keys","onSubmit","email","password","response","method","url","data","key","refresh_key","push","e","message","includes","oAuth","console","log","request_uri","window","location","replace","length","required"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport api from '../../../services/api';\nimport { storeAuth  } from 'store/ducks/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useForm } from 'react-hook-form';\n\nimport Modal from '../../aux/Modal';\nimport ErrorDialog from '../../aux/ErrorDialog/ErrorDialog';\n\nimport IndexFooter from './IndexFooter/IndexFooter';\n\nimport './styles.scss';\n\nexport default function Login() {\n    const { register, handleSubmit, errors } = useForm();\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const authKey = useSelector(state => state.auth.keys)\n\n    const onSubmit = async ({ email, password }) => {\n        setLoading(true)\n        try {\n            const response = await api({\n                method: 'post',\n                url: '/login',\n                data: { email, password },\n            })\n            const { key, refresh_key } = response.data\n            dispatch(storeAuth({key, refresh_key}))\n            history.push('/explore')\n        } catch(e) {\n            e.message.includes('403') && setError('E-mail inserido ainda não foi confirmado')\n            e.message.includes('401') && setError('E-mail ou senha inválido(s)')\n            e.message.includes('400') && setError('E-mail já registrado, clique em entrar usando sua conta Google')\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    const oAuth = async () => {\n        try {\n            const response = await api({\n                method: 'get',\n                url: '/oauth_login'\n            })\n            console.log(response.data.request_uri)\n            window.location.replace(response.data.request_uri)\n        } catch(e) {\n            console.log(e)\n        }\n    }\n\n\n    useEffect(() => {\n        if (authKey.length !== 0) {\n            history.push('/explore')\n        } \n    },[])\n\n    return(\n        <>\n            <div className=\"login\">\n                <section className=\"wrapper\">\n                    <div className=\"login-main\">\n                        <img className=\"ike-logo\" \n                            src={\"https://ikebana-app-content.s3-sa-east-1\"+\n                                    \".amazonaws.com/static/mainlogo.png\"} alt=\"logo\"/>\n\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            <div className=\"login-main__inputs\">\n                                <div className=\"input-wrapper\">\n                                    <input className=\"login-input\" name=\"email\" \n                                        type=\"text\" ref={ register({ required: true }) } \n                                        placeholder=\"Usuário\"/>\n                                    {errors.email && <div title=\"Campo necessário\" \n                                        className=\"validation-overlay\"><i className=\"material-icons\">\n                                            error_outline</i></div>}\n                                </div>\n                                <input  className=\"login-input\" name=\"password\" \n                                    type=\"password\" ref={ register } placeholder=\"Senha\" />\n                            </div>\n                            <button type=\"submit\" className=\"login-btn\">\n                                {\n                                    loading === true ? <div className=\"sizer\">\n                                        <div className=\"lds-ellipsis\"><div></div>\n                                            <div></div><div></div><div></div></div>\n                                    </div>\n                                    :\n                                    <p>Entrar</p>\n                                }\n                            </button>\n                        </form>\n                        <div className=\"login-main__spacer\">\n                            <div className=\"spacer-h\"></div>\n                            <p className=\"login-main__spacer--text\">OU</p>\n                            <div className=\"spacer-h\"></div>\n                        </div>\n                        <div className=\"login-main__external\">\n                            <button onClick={() => oAuth()} className=\"login-google\">\n                                {\n                                    loading === true ? <div className=\"sizer\">\n                                        <div className=\"lds-ellipsis\"><div></div>\n                                            <div></div><div></div><div></div></div>\n                                    </div>\n                                       :\n                                       <>\n                                    <p className=\"login-google--text\">Entrar usando</p>\n                                    <img className=\"google-logo\" \n                                        src=\"https://image.flaticon.com/icons/svg/281/281764.svg\" \n                                        alt=\"Google\" />\n                                       </>\n                                }\n                            </button>\n                        </div>\n                        <div className=\"login-main__forgot\">\n                            <button className=\"forgot-btn\">\n                                <Link to=\"/forgot_pass\">\n                                    Esqueceu sua senha?\n                                </Link>\n                            </button>\n                        </div>\n                    </div>\n                    <div className=\"login-bottom\">\n                        <p className=\"login-bottom--text\">Não tem uma conta?\n                            <button className=\"register-btn\">\n                                <Link to=\"/register\">Criar</Link>\n                            </button>\n                        </p>\n                    </div>\n                    <div className=\"get-info\">Em breve...</div>\n                    <div className=\"login-get-btn\">\n                        <button className=\"appstore-btn\">\n                            <img src=\"https://ikebana-app-content.s3-sa-east-1.amazonaws.com/static/app-store-badge.png\" alt=\"App store\" />\n                        </button>\n                        <button className=\"playstore-btn\">\n                            <img src=\"https://play.google.com/intl/pt-BR/badges/static/images/badges/pt-br_badge_web_generic.png\" alt=\"Play store\" />\n                        </button>\n                    </div>\n                </section>\n                <IndexFooter />\n            </div>\n            {\n                error &&\n                    <Modal>\n                        <ErrorDialog handler={() => setError(false)} value={error}/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}