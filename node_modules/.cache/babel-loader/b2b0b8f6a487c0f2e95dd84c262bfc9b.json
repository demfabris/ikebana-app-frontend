{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/pages/Account/components/EditAccount/EditAccount.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api';\nimport { useForm } from 'react-hook-form';\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\nimport InfoDialog from '../../../../aux/InfoDialog/InfoDialog';\nimport './styles.scss';\nexport default function EditAccount() {\n  const {\n    register,\n    handleSubmit,\n    errors,\n    watch\n  } = useForm();\n  const authKey = useSelector(state => state.auth.keys);\n  const userData = useSelector(state => state.account.userData[0]);\n  const [filePayload, setFilePayload] = useState(false);\n  const [inputFile, setInputFile] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [info, setInfo] = useState(false);\n  const [data, setData] = useState(false);\n\n  const handleInputChange = e => {\n    const file = e.target.files[0];\n\n    if (!file) {\n      setError('Selecione alguma foto');\n      return void 0;\n    }\n\n    if ((file.size / 1024 / 1024).toFixed() > 5) {\n      setError('Selecione um arquivo menor que 5MB');\n      return void 0;\n    }\n\n    if (!['image/png', 'image/jpeg'].includes(file.type)) {\n      setError('Formato inválido, selecione apenas imagens JPG ou PNG');\n      return void 0;\n    }\n\n    setInputFile(URL.createObjectURL(e.target.files[0]));\n    setFilePayload(file);\n  };\n\n  const onSubmit = async ({\n    fullname,\n    bio\n  }) => {\n    setLoading(true);\n    const formData = new FormData();\n\n    try {\n      formData.append('file', filePayload);\n      formData.append('fullname', fullname);\n      formData.append('bio', bio);\n      const response = await api({\n        method: 'post',\n        url: '/user',\n        headers: {\n          'Authorization': `Bearer ${authKey[0].key}`,\n          'Content-Type': 'multipart/form-data'\n        },\n        data: formData\n      });\n      response.data && setInfo('Dados atualizados');\n    } catch (e) {\n      window.location.pathname = '/refresh';\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const clearNotifications = async () => {\n    setLoading(true);\n\n    try {\n      const response = await api({\n        method: 'delete',\n        url: '/user',\n        headers: {\n          'Authorization': `Bearer ${authKey[0].key}`\n        }\n      });\n      console.log(response.data);\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    setData(userData);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"edit__header--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, \"Editar informa\\xE7\\xF5es pessoais.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"edit__inputs--desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }, \"Informa\\xE7\\xF5es p\\xFAblicas da conta.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"input-label acc-field__title\",\n    htmlFor: \"picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"edit__inputs--picture\",\n    src: !inputFile ? data.picture : inputFile,\n    alt: \"profile picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    ref: register(),\n    onChange: handleInputChange,\n    className: \"account-input img-input\",\n    name: \"picture\",\n    id: \"picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"fullname\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, \"Nome Completo\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    ref: register({\n      required: true\n    }),\n    className: \"account-input\",\n    defaultValue: data.fullname,\n    name: \"fullname\",\n    id: \"fullname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, \"E-mail\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    ref: register({\n      required: true\n    }),\n    className: \"account-input email\",\n    value: data.email,\n    name: \"email\",\n    id: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"bio\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }, \"Biografia\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"account-input\",\n    name: \"bio\",\n    ref: register({\n      maxLength: 350\n    }),\n    defaultValue: data.bio !== '' ? data.bio : null,\n    placeholder: \"Fa\\xE7a uma breve descri\\xE7\\xE3o sobre voc\\xEA e sua experi\\xEAncia com Ikebana, m\\xE1ximo 350 caract\\xE9res.\",\n    id: \"bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"bio-counter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 33\n    }\n  }, \"123\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, \"Mensagens\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"del-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 56\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 67\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 56\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 67\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    onClick: clearNotifications,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 37\n    }\n  }, \"Limpar Notifica\\xE7\\xF5es\"))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"app-btn btn-filled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 52\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 63\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 52\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 63\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  }, userData.isPartner === true ? 'Atualizar' : 'Concluir'))))), error && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ErrorDialog, {\n    value: error,\n    handler: () => {\n      setError(false);\n      window.location.reload();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  })), info && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InfoDialog, {\n    value: info,\n    handler: () => {\n      setInfo(false);\n      window.location.reload();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  })));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/pages/Account/components/EditAccount/EditAccount.js"],"names":["React","useState","useEffect","useDispatch","useSelector","api","useForm","Modal","ErrorDialog","InfoDialog","EditAccount","register","handleSubmit","errors","watch","authKey","state","auth","keys","userData","account","filePayload","setFilePayload","inputFile","setInputFile","loading","setLoading","error","setError","info","setInfo","data","setData","handleInputChange","e","file","target","files","size","toFixed","includes","type","URL","createObjectURL","onSubmit","fullname","bio","formData","FormData","append","response","method","url","headers","key","window","location","pathname","clearNotifications","console","log","picture","required","email","maxLength","isPartner","reload"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api'\nimport { useForm } from 'react-hook-form';\n\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\nimport InfoDialog from '../../../../aux/InfoDialog/InfoDialog';\n\nimport './styles.scss';\n\nexport default function EditAccount() {\n    const { register, handleSubmit, errors, watch } = useForm();\n    const authKey = useSelector(state => state.auth.keys)\n    const userData = useSelector(state => state.account.userData[0])\n    \n    const [filePayload, setFilePayload] = useState(false);\n    const [inputFile, setInputFile] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [info, setInfo] = useState(false);\n    const [data, setData] = useState(false);\n\n    const handleInputChange = (e) => {\n        const file = e.target.files[0]\n\n        if (!file) {\n            setError('Selecione alguma foto')\n            return void 0\n        }\n        \n        if (((file.size/1024)/1024).toFixed() > 5) {\n            setError('Selecione um arquivo menor que 5MB')\n            return void 0\n        }\n\n        if (!(['image/png', 'image/jpeg'].includes(file.type))){\n            setError('Formato inválido, selecione apenas imagens JPG ou PNG')\n            return void 0\n        }\n\n        setInputFile(URL.createObjectURL(e.target.files[0]))\n        setFilePayload(file)\n    }\n\n    const onSubmit = async ({ fullname, bio}) => {\n        setLoading(true)\n        const formData = new FormData()\n        try {\n            formData.append('file', filePayload)\n            formData.append('fullname', fullname)\n            formData.append('bio', bio)\n            const response = await api({\n                method: 'post',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`,\n                    'Content-Type': 'multipart/form-data'\n                },\n                data: formData\n            })\n            response.data && setInfo('Dados atualizados')\n        } catch(e) {\n            window.location.pathname = '/refresh'\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    const clearNotifications = async () => {\n        setLoading(true)\n        try {\n            const response = await api({\n                method: 'delete',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`\n                },\n            })\n            console.log(response.data)\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    useEffect(() => {\n        setData(userData)\n    },[])\n\n    return(\n        <>\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"edit\">\n                    <div className=\"edit__header\">\n                        <p className=\"edit__header--title\">Editar informações pessoais.</p>\n                    </div>\n                    <div className=\"edit__inputs\">\n                        <p className=\"edit__inputs--desc\">Informações públicas da conta.</p>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label className=\"input-label acc-field__title\" \n                                htmlFor=\"picture\">\n                                <img className=\"edit__inputs--picture\" \n                                    src={!inputFile ? data.picture : inputFile} \n                                alt=\"profile picture\"/>\n                            </label>\n                                <input type=\"file\" ref={register()} \n                                    onChange={handleInputChange} \n                            className=\"account-input img-input\" name=\"picture\" \n                            id=\"picture\"/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"fullname\" \n                                className=\"input-label acc-field__title\">Nome Completo</label>\n                            <input type=\"text\" ref={register({required: true})} \n                                className=\"account-input\" defaultValue={data.fullname} \n                            name=\"fullname\" id=\"fullname\"/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"email\" \n                                className=\"input-label acc-field__title\">E-mail</label>\n                            <input type=\"text\" ref={register({required: true})} \n                                className=\"account-input email\" value={data.email} name=\"email\" id=\"email\"/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"bio\" \n                                className=\"input-label acc-field__title\">Biografia</label>\n                            <textarea className=\"account-input\" name=\"bio\" \n                                ref={register({maxLength: 350})} defaultValue={data.bio !== '' ? data.bio : null}\n                                placeholder=\"Faça uma breve descrição sobre você e sua experiência com Ikebana, máximo 350 caractéres.\" id=\"bio\">\n                                <p className=\"bio-counter\">123</p>\n                            </textarea>\n                        </div>\n                        {/* <p className=\"edit__inputs--desc\">Notificações</p> */}\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label className=\"input-label acc-field__title\">\n                            Mensagens</label>\n                            <button type=\"button\" className=\"del-btn\">\n                                {\n                                    loading === true ? <div className=\"sizer\">\n                                        <div class=\"lds-ellipsis\"><div></div>\n                                            <div></div><div></div><div></div></div>\n                                    </div>\n                                    :\n                                    <p onClick={clearNotifications}>Limpar Notificações</p>\n                                }\n                            </button>\n                        </div>\n                        <button type=\"submit\" \n                        className=\"app-btn btn-filled\">\n                            {\n                                loading === true ? <div className=\"sizer\">\n                                    <div class=\"lds-ellipsis\"><div></div>\n                                        <div></div><div></div><div></div></div>\n                                </div>\n                                :\n                                <p>{ userData.isPartner === true ? 'Atualizar' : 'Concluir' }</p>\n                            }\n                        </button>\n                    </div>\n                </div>\n            </form>\n            {\n                error &&\n                    <Modal>\n                        <ErrorDialog value={error} handler={() =>{\n                            setError(false)\n                            window.location.reload()\n                        } }/>\n                    </Modal>\n            }\n            {\n                info &&\n                    <Modal>\n                        <InfoDialog value={info} handler={() => {\n                            setInfo(false)\n                            window.location.reload()\n                        }}/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}