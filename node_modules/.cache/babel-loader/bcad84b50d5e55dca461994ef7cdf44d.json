{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/Header/Header.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport SettingsDialog from '../aux/SettingsDialog/SettingsDialog';\nimport Modal from '../aux/Modal';\nimport api from '../../services/api';\nimport { changeUrl } from 'store/ducks/links';\nimport { loadNotif } from 'store/ducks/notifications';\nimport './styles.scss';\nimport Clipper from '../aux/Clipper/Clipper'; //hamburguer\n//Page names\n\nconst Pages = {\n  'explore': 'Explorar',\n  'account': 'Conta',\n  'home': 'Perfil',\n  'lessons': 'Aulas',\n  'lesson': 'Aula'\n};\n\nconst CurrentUrl = () => {\n  let active = useLocation();\n  return active.pathname.slice(1).split('/')[0];\n};\n\nexport default function Header() {\n  const dispatch = useDispatch(); //shrink on scroll\n\n  window.onscroll = function () {\n    shrinkOnScroll();\n  };\n\n  const shrinkOnScroll = () => {\n    if (document.body.scrollTop > 80 || document.documentElement.scrollTop > 80) {\n      document.getElementById(\"header_main\").style.height = \"3.5em\";\n      document.getElementById(\"menu_container\").style.top = \"4px\";\n      document.getElementById(\"sidebar_menu\").style.transform = \"translateY(-1.5em)\";\n    } else {\n      document.getElementById(\"menu_container\").style.top = \"16px\";\n      document.getElementById(\"header_main\").style.height = \"5em\";\n      document.getElementById(\"sidebar_menu\").style.transform = \"translateY(0)\";\n    }\n  }; //hamburguer\n\n\n  const [side, setSide] = useState(true);\n  useEffect(() => {\n    window.innerWidth < 850 && setSide(false);\n  }, []);\n\n  const toggleSidebar = () => {\n    if (window.innerWidth < 850) {\n      if (side) {\n        document.getElementById(\"main_sidebar\").style.transform = \"translateX(-220px)\";\n        document.getElementById(\"side-overlay\").style.display = \"none\";\n        setSide(false);\n      } else {\n        document.getElementById(\"main_sidebar\").style.transform = \"translateX(0px)\";\n        document.getElementById(\"side-overlay\").style.display = \"block\";\n        setSide(true);\n      }\n    } else {\n      if (side) {\n        document.getElementById(\"main_sidebar\").style.transform = \"translateX(-220px)\";\n\n        if (window.location.pathname.includes('explore')) {\n          document.getElementsByClassName(\"prev\")[0].style.transform = \"translateX(10px)\";\n        }\n\n        setSide(false);\n      } else {\n        document.getElementById(\"main_sidebar\").style.transform = \"translateX(0px)\";\n\n        if (window.location.pathname.includes('explore')) {\n          document.getElementsByClassName(\"prev\")[0].style.transform = \"translateX(230px)\";\n        }\n\n        setSide(true);\n      }\n    }\n  }; //Buttons dialog\n\n\n  const [dialog, setDialog] = useState(false); //Buttons counter indicator\n\n  const cartCount = useSelector(state => state.shop.cart.length);\n  const notifCount = useSelector(state => state.notifications.notifications.length); //Profile button\n\n  const [settings, setSettings] = useState(false); //Defaults\n\n  const defaults = useSelector(state => state.defaults.data); //Data fetching\n\n  const [data, setData] = useState([]);\n  const authKey = useSelector(state => state.auth.keys);\n\n  const hitApi = async key => {\n    try {\n      const response = await api({\n        method: 'get',\n        url: '/user',\n        headers: {\n          'Authorization': `Bearer ${key[0].key}`\n        }\n      });\n      dispatch(loadNotif(response.data.notifications));\n      setData(response.data);\n    } catch (e) {\n      console.log(e); // window.location.pathname='/refresh'\n    }\n  };\n\n  useEffect(() => {\n    authKey.length !== 0 && hitApi(authKey);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: toggleSidebar,\n    id: \"side-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-main\",\n    id: \"header_main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu-container\",\n    id: \"menu_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: toggleSidebar,\n    id: \"hamburguer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 69\n    }\n  }, \"menu\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sanguetsu-mark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"header-logo\",\n    src: \"https://ikebana-app-content.s3-sa-east-1.amazonaws.com/static/mainlogo_transparent_notext.png\",\n    alt: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"logo-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 25\n    }\n  }, \"SANGUETSU\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-main__content\",\n    id: \"header_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-main__content--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"title-limiter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"page-title\",\n    id: \"header_title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 29\n    }\n  }, Pages[CurrentUrl()]))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-main__content--search\",\n    id: \"search_box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    id: \"search_icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, \"search\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"search-box\",\n    id: \"search_inside\",\n    type: \"text\",\n    placeholder: \"Pesquisar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"right-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shrink\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-main__content--buttons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `counter ${cartCount === 0 ? 'counter-hidden' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 41\n    }\n  }, cartCount)), /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => setDialog(true),\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 37\n    }\n  }, \"redeem\"), dialog && /*#__PURE__*/React.createElement(Clipper, {\n    handler: () => setDialog(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 45\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `counter ${notifCount === 0 ? 'counter-hidden' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 41\n    }\n  }, notifCount)), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => dispatch(changeUrl('messages')),\n    to: \"/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 41\n    }\n  }, \"notifications_none\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-main__content--profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      authKey.length !== 0 && setSettings(true);\n    },\n    className: \"profile__btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    title: data.username,\n    className: \"profile__btn--img\",\n    src: `${data.length === 0 ? defaults.picture : data.picture}`,\n    alt: \"Profile pic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 37\n    }\n  }))))))), settings && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(SettingsDialog, {\n    data: {\n      'Perfil': '/home/arrangements',\n      'Configurações': '/account/edit',\n      'Sair': '/logout'\n    },\n    handler: () => setSettings(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 25\n    }\n  })));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/Header/Header.js"],"names":["React","useState","useEffect","Link","useLocation","useSelector","useDispatch","SettingsDialog","Modal","api","changeUrl","loadNotif","Clipper","Pages","CurrentUrl","active","pathname","slice","split","Header","dispatch","window","onscroll","shrinkOnScroll","document","body","scrollTop","documentElement","getElementById","style","height","top","transform","side","setSide","innerWidth","toggleSidebar","display","location","includes","getElementsByClassName","dialog","setDialog","cartCount","state","shop","cart","length","notifCount","notifications","settings","setSettings","defaults","data","setData","authKey","auth","keys","hitApi","key","response","method","url","headers","e","console","log","username","picture"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport SettingsDialog from '../aux/SettingsDialog/SettingsDialog';\nimport Modal from '../aux/Modal';\nimport api from '../../services/api';\nimport { changeUrl } from 'store/ducks/links';\nimport { loadNotif } from 'store/ducks/notifications';\n\nimport './styles.scss';\n\nimport Clipper from '../aux/Clipper/Clipper';\n\n//hamburguer\n\n//Page names\nconst Pages = {\n    'explore' : 'Explorar',\n    'account' : 'Conta',\n    'home' : 'Perfil',\n    'lessons' : 'Aulas',\n    'lesson' : 'Aula'\n};\nconst CurrentUrl = () => {\n    let active = useLocation();\n    return active.pathname.slice(1).split('/')[0];\n}\n\nexport default function Header() {\n    const dispatch = useDispatch();\n\n    //shrink on scroll\n    window.onscroll = function() {shrinkOnScroll()};\n    const shrinkOnScroll = () => {\n        if (document.body.scrollTop > 80 || document.documentElement.scrollTop > 80) {\n            document.getElementById(\"header_main\").style.height=\"3.5em\"\n            document.getElementById(\"menu_container\").style.top=\"4px\"\n            document.getElementById(\"sidebar_menu\").style.transform=\"translateY(-1.5em)\"\n        }   else {\n            document.getElementById(\"menu_container\").style.top=\"16px\"\n            document.getElementById(\"header_main\").style.height=\"5em\"\n            document.getElementById(\"sidebar_menu\").style.transform=\"translateY(0)\"\n        }\n    }\n\n    //hamburguer\n    const [side, setSide] = useState(true)\n\n    useEffect(() => {\n        window.innerWidth < 850 && setSide(false)\n    },[])\n\n    const toggleSidebar = () => {\n\n        if (window.innerWidth < 850) {\n            if (side) { \n                document.getElementById(\"main_sidebar\").style.transform=\"translateX(-220px)\"\n                document.getElementById(\"side-overlay\").style.display=\"none\";\n                setSide(false)\n            }\n            else {\n                document.getElementById(\"main_sidebar\").style.transform=\"translateX(0px)\"\n                document.getElementById(\"side-overlay\").style.display=\"block\";\n                setSide(true)\n            }\n            \n        }\n\n        else {\n            if (side) { \n                document.getElementById(\"main_sidebar\").style.transform=\"translateX(-220px)\"\n                if (window.location.pathname.includes('explore')) {\n                    document.getElementsByClassName(\"prev\")[0].style.transform=\"translateX(10px)\"\n                }\n                setSide(false)\n            }\n            else {\n                document.getElementById(\"main_sidebar\").style.transform=\"translateX(0px)\"\n                if (window.location.pathname.includes('explore')) {\n                    document.getElementsByClassName(\"prev\")[0].style.transform=\"translateX(230px)\"\n                }\n                setSide(true)\n            }\n        }\n    }\n\n\n    //Buttons dialog\n    const [dialog, setDialog] = useState(false);\n\n    //Buttons counter indicator\n    const cartCount = useSelector(state => state.shop.cart.length);\n    const notifCount = useSelector(state => state.notifications.notifications.length)\n\n    //Profile button\n    const [settings, setSettings] = useState(false)\n\n    //Defaults\n    const defaults = useSelector(state => state.defaults.data)\n\n    //Data fetching\n    const [data, setData] = useState([])\n    const authKey = useSelector(state => state.auth.keys)\n\n    const hitApi = async (key) => {\n        try{\n            const response = await api({\n                method: 'get',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${key[0].key}`\n                }\n            })\n            dispatch(loadNotif(response.data.notifications))\n            setData(response.data)\n        } catch(e){\n            console.log(e)\n            // window.location.pathname='/refresh'\n        }\n    }\n\n    useEffect(() => {\n        authKey.length !== 0 && hitApi(authKey)\n    }, [])\n\n    return (\n        <>\n            <div onClick={toggleSidebar} id=\"side-overlay\"></div>\n            <div className=\"header-main\" id=\"header_main\">\n                <div className=\"menu-container\" id=\"menu_container\">\n                    <button onClick={toggleSidebar} id=\"hamburguer\"><i className=\"material-icons\">\n                        menu\n                    </i></button>\n                    <div className=\"sanguetsu-mark\">\n                        <img className=\"header-logo\" src={\"https://ikebana-app-content.s3-sa-east-1.amazonaws.com/static/mainlogo_transparent_notext.png\"} alt=\"logo\"/>\n                        <p className=\"logo-title\">SANGUETSU</p>\n                    </div>\n                </div>\n                <div className=\"header-main__content\" id=\"header_title\">\n                    <div className=\"header-main__content--title\">\n                        <div className=\"title-limiter\">\n                            <h1 className=\"page-title\" \n                                id=\"header_title\">{Pages[CurrentUrl()]}</h1>\n                        </div>\n                    </div>\n                    <div className=\"header-main__content--search\" id=\"search_box\">\n                        <i className=\"material-icons\" id=\"search_icon\">search</i>\n                        <input className=\"search-box\" id=\"search_inside\" type=\"text\" placeholder=\"Pesquisar\"/>\n                    </div>\n                    <div className=\"right-wrapper\">\n                        <div className=\"shrink\">\n                            <div className=\"header-main__content--buttons\">\n                                <div className=\"button-wrapper\">\n                                    <div className={`counter ${ cartCount === 0 ?\n                                            'counter-hidden' : '' }`}>\n                                        <p>{cartCount}</p></div>\n                                    <i onClick={() => setDialog(true)} \n                                        className=\"material-icons\">redeem</i>\n                                    {\n                                        dialog &&\n                                            <Clipper handler={() => setDialog(false)} />\n                                    }\n                                </div>\n                                <div className=\"button-wrapper\">\n                                    <div className={`counter ${ notifCount === 0 ? \n                                            'counter-hidden' : '' }`}>\n                                        <p>{notifCount}</p></div>\n                                    <Link onClick={() => dispatch(changeUrl('messages'))} \n                                        to=\"/home\">\n                                        <i className=\"material-icons\">notifications_none</i>\n                                    </Link>\n                                </div>\n                            </div>\n                            <div className=\"header-main__content--profile\">\n                                <button onClick={() => {\n                                    authKey.length !== 0 &&\n                                        setSettings(true)\n                                }} \n                                    className=\"profile__btn\">\n                                    <img title={data.username} className=\"profile__btn--img\" \n                                        src={`${data.length === 0 ? defaults.picture : data.picture}`}\n                                        alt=\"Profile pic\"/>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {\n                settings &&\n                    <Modal>\n                        <SettingsDialog data={{\n                            'Perfil': '/home/arrangements',\n                            'Configurações': '/account/edit',\n                            'Sair': '/logout'\n                        }} handler={() => setSettings(false)}/>\n                    </Modal>\n            }\n        </>\n    );\n}\n\n"]},"metadata":{},"sourceType":"module"}