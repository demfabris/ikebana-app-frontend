{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/reactapp/src/components/pages/Account/Account.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from 'services/api';\nimport { storeUserData, clearUserData } from 'store/ducks/account';\nimport Join from './components/Join/Join';\nimport EditAccount from './components/EditAccount/EditAccount';\nimport Password from './components/Password/Password';\nimport NewProject from './components/New/NewProject';\nimport EditProject from './components/Edit/EditProject';\nimport './styles.scss';\n\nfunction Blank() {\n  return /*#__PURE__*/React.createElement(React.Fragment, null);\n}\n\nexport default function Account() {\n  const [loading, setLoading] = useState(true);\n  const dispatch = useDispatch();\n  const authKey = useSelector(state => state.auth.keys);\n  const userData = useSelector(state => state.account.userData[0]);\n\n  const hitApi = async key => {\n    try {\n      const response = await api({\n        method: 'get',\n        url: '/user',\n        headers: {\n          'Authorization': `Bearer ${key[0].key}`\n        }\n      });\n      dispatch(storeUserData(response.data));\n    } catch (e) {\n      if (e.message.includes('401')) {\n        window.location.pathname = \"/refresh\";\n      }\n    } finally {\n      setLoading(false);\n    }\n  }; //TAB handling\n\n\n  const [active, setActive] = useState('blank');\n  const tabsComponent = {\n    'blank': Blank,\n    'join': Join,\n    'password': Password,\n    'edit': EditAccount,\n    'new_project': NewProject,\n    'edit_project': EditProject\n  };\n  const ActiveComponent = tabsComponent[active];\n  useEffect(() => {\n    window.scrollTo(0, 0);\n    const path = window.location.pathname.slice(9);\n    path && setActive(path);\n  }, []);\n\n  const handleClick = action => () => {\n    window.location.pathname = '/account/' + action;\n    setActive(action);\n  }; //auth handling\n\n\n  useEffect(() => {\n    if (authKey.length === 0) {\n      window.location.pathname = '/login';\n      alert('Você precisa entrar para acessar essa página');\n    } else {\n      hitApi(authKey);\n    }\n\n    return () => {\n      dispatch(clearUserData());\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"account-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"account-main__sidebar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"account-main__sidebar--list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    onClick: handleClick('join'),\n    className: `tab-element \n                            ${active === 'join' ? 'el-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: `tab-element__btn \n                                ${active === 'join' ? 'txt-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, \"Participar\")), /*#__PURE__*/React.createElement(\"li\", {\n    onClick: handleClick('edit'),\n    className: `tab-element \n                            ${active === 'edit' ? 'el-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: `tab-element__btn \n                                ${active === 'edit' ? 'txt-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }\n  }, \"Editar Informa\\xE7\\xF5es\")), /*#__PURE__*/React.createElement(\"li\", {\n    onClick: handleClick('password'),\n    className: `tab-element \n                            ${active === 'password' ? 'el-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: `tab-element__btn \n                                ${active === 'password' ? 'txt-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }\n  }, \"Senha\")), /*#__PURE__*/React.createElement(\"li\", {\n    onClick: handleClick('new_project'),\n    className: `tab-element \n                            ${active === 'new_project' ? 'el-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: `tab-element__btn \n                                ${active === 'new_project' ? 'txt-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }, \"Novo Projeto\")), /*#__PURE__*/React.createElement(\"li\", {\n    style: {\n      cursor: \"auto\"\n    },\n    className: `tab-element \n                            ${active === 'edit_project' ? 'el-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      color: \"#969696\",\n      cursor: \"auto\"\n    },\n    className: `tab-element__btn \n                                ${active === 'edit_project' ? 'txt-active' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, \"Editar Projeto\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"account-main__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, !loading && /*#__PURE__*/React.createElement(ActiveComponent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/reactapp/src/components/pages/Account/Account.js"],"names":["React","useEffect","useState","useSelector","useDispatch","api","storeUserData","clearUserData","Join","EditAccount","Password","NewProject","EditProject","Blank","Account","loading","setLoading","dispatch","authKey","state","auth","keys","userData","account","hitApi","key","response","method","url","headers","data","e","message","includes","window","location","pathname","active","setActive","tabsComponent","ActiveComponent","scrollTo","path","slice","handleClick","action","length","alert","cursor","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from 'services/api';\n\nimport { storeUserData, clearUserData } from 'store/ducks/account';\n\nimport Join from './components/Join/Join';\nimport EditAccount from './components/EditAccount/EditAccount';\nimport Password from './components/Password/Password';\nimport NewProject from './components/New/NewProject';\nimport EditProject from './components/Edit/EditProject';\n\nimport './styles.scss';\n\nfunction Blank() {\n    return(\n        <>\n        </>\n    );\n}\n\nexport default function Account() {\n    const [loading, setLoading] = useState(true);\n    const dispatch = useDispatch();\n    const authKey = useSelector(state => state.auth.keys);\n    const userData = useSelector(state => state.account.userData[0])\n\n    const hitApi = async (key) => {\n        try{\n            const response = await api({\n                method: 'get',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${key[0].key}`\n                },\n            })\n            dispatch(storeUserData(response.data))\n        } catch(e){\n            if (e.message.includes('401')) {\n                window.location.pathname=\"/refresh\"\n            }\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    //TAB handling\n    const [active, setActive] = useState('blank');\n    const tabsComponent = {\n        'blank': Blank,\n        'join': Join,\n        'password': Password,\n        'edit': EditAccount,\n        'new_project': NewProject,\n        'edit_project': EditProject\n    };\n    const ActiveComponent = tabsComponent[active];\n    \n    useEffect(() => {\n        window.scrollTo(0, 0)\n        const path = window.location.pathname.slice(9)\n        path && setActive(path);\n    }, []);\n\n    const handleClick = (action) => () => {\n        window.location.pathname = '/account/' + action;\n        setActive(action)\n    }\n\n    //auth handling\n    useEffect(() => {\n        if (authKey.length === 0) {\n            window.location.pathname = '/login'\n            alert('Você precisa entrar para acessar essa página')\n        } else {\n            hitApi(authKey)\n        }\n\n        return () => {\n            dispatch(clearUserData())\n        }\n    }, [])\n\n    return(\n        <div className=\"account\">\n            <div className=\"account-main\">\n                <div className=\"account-main__sidebar\">\n                    <ul className=\"account-main__sidebar--list\">\n                        <li onClick={handleClick('join')} \n                        className={`tab-element \n                            ${active === 'join' ? 'el-active' : ''}`}>\n                            <button className={`tab-element__btn \n                                ${active === 'join' ? 'txt-active' : ''}`}>\n                            Participar</button>\n                        </li>\n                        <li onClick={handleClick('edit')} \n                        className={`tab-element \n                            ${active === 'edit' ? 'el-active' : ''}`}>\n                            <button className={`tab-element__btn \n                                ${active === 'edit' ? 'txt-active' : ''}`}>\n                            Editar Informações</button>\n                        </li>\n                        <li onClick={handleClick('password')} \n                        className={`tab-element \n                            ${active === 'password' ? 'el-active' : ''}`}>\n                            <button className={`tab-element__btn \n                                ${active === 'password' ? 'txt-active' : ''}`}>\n                            Senha</button>\n                        </li>\n                        <li onClick={handleClick('new_project')} \n                        className={`tab-element \n                            ${active === 'new_project' ? 'el-active' : ''}`}>\n                            <button className={`tab-element__btn \n                                ${active === 'new_project' ? 'txt-active' : ''}`}>\n                            Novo Projeto</button>\n                        </li>\n                        <li style={{cursor: \"auto\"}} className={`tab-element \n                            ${active === 'edit_project' ? 'el-active' : ''}`}>\n                            <button style={{color: \"#969696\", cursor: \"auto\"}} \n                            className={`tab-element__btn \n                                ${active === 'edit_project' ? 'txt-active' : ''}`}>\n                            Editar Projeto</button>\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"account-main__container\">\n                    {\n                        !loading &&\n                            <ActiveComponent />\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}