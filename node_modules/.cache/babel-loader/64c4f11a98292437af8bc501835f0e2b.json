{"ast":null,"code":"import _regeneratorRuntime from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import LessonDisplay from'./LessonDisplay';import api from'../../../services/api';import{useSelector,useDispatch}from'react-redux';import EmptyDisplay from'../Empty/EmptyDisplay';import'./styles.scss';export default function LessonWrapper(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var authKey=useSelector(function(state){return state.auth.keys;});var fetchProjects=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var key,response,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:key=_args.length>0&&_args[0]!==undefined?_args[0]:authKey;setLoading(true);_context.prev=2;_context.next=5;return api({method:'get',url:'/projects',headers:{'Authorization':\"Bearer \".concat(key[0].key)}});case 5:response=_context.sent;setData(response.data.filter(function(pj){return pj.type=='lesson';}));_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 12:_context.prev=12;setLoading(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,9,12,15]]);}));return function fetchProjects(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchProjects();},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"arr-wrapper \".concat(data.length===0?'wrapper-center':'')},loading?/*#__PURE__*/React.createElement(\"div\",{className:\"lds-dual-ring\"}):data.map(function(el,key){return/*#__PURE__*/React.createElement(LessonDisplay,Object.assign({key:key},el));}),!loading&&data.length===0&&/*#__PURE__*/React.createElement(EmptyDisplay,null));}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana_production/src/components/list_elements/Lesson/LessonWrapper.js"],"names":["React","useState","useEffect","LessonDisplay","api","useSelector","useDispatch","EmptyDisplay","LessonWrapper","data","setData","loading","setLoading","authKey","state","auth","keys","fetchProjects","key","method","url","headers","response","filter","pj","type","console","log","length","map","el"],"mappings":"ogBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,GAAP,KAAgB,uBAAhB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CAEA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CAEA,MAAO,eAAP,CAEA,cAAe,SAASC,CAAAA,aAAT,EAAyB,eACZP,QAAQ,CAAC,EAAD,CADI,wCAC7BQ,IAD6B,eACvBC,OADuB,8BAENT,QAAQ,CAAC,IAAD,CAFF,yCAE7BU,OAF6B,eAEpBC,UAFoB,eAGpC,GAAMC,CAAAA,OAAO,CAAGR,WAAW,CAAC,SAAAS,KAAK,QAAIA,CAAAA,KAAK,CAACC,IAAN,CAAWC,IAAf,EAAN,CAA3B,CAEA,GAAMC,CAAAA,aAAa,0FAAG,oKAAOC,GAAP,+CAAWL,OAAX,CAClBD,UAAU,CAAC,IAAD,CAAV,CADkB,sCAGSR,CAAAA,GAAG,CAAC,CACvBe,MAAM,CAAE,KADe,CAEvBC,GAAG,CAAE,WAFkB,CAGvBC,OAAO,CAAE,CACL,iCAA2BH,GAAG,CAAC,CAAD,CAAH,CAAOA,GAAlC,CADK,CAHc,CAAD,CAHZ,QAGRI,QAHQ,eAUdZ,OAAO,CAACY,QAAQ,CAACb,IAAT,CAAcc,MAAd,CAAsB,SAACC,EAAD,QAAQA,CAAAA,EAAE,CAACC,IAAH,EAAW,QAAnB,EAAtB,CAAD,CAAP,CAVc,+EAYdC,OAAO,CAACC,GAAR,cAZc,yBAcdf,UAAU,CAAC,KAAD,CAAV,CAdc,qGAAH,kBAAbK,CAAAA,aAAa,0CAAnB,CAkBAf,SAAS,CAAC,UAAM,CACZe,aAAa,GAChB,CAFQ,CAEP,EAFO,CAAT,CAIA,mBACI,2BAAK,SAAS,uBAAiBR,IAAI,CAACmB,MAAL,GAAgB,CAAhB,CAAoB,gBAApB,CAAuC,EAAxD,CAAd,EAEQjB,OAAO,cACH,2BAAK,SAAS,CAAC,eAAf,EADG,CAGPF,IAAI,CAACoB,GAAL,CAAS,SAACC,EAAD,CAAKZ,GAAL,qBACL,oBAAC,aAAD,gBAAe,GAAG,CAAEA,GAApB,EAA6BY,EAA7B,EADK,EAAT,CALR,CAUQ,CAACnB,OAAD,EAAYF,IAAI,CAACmB,MAAL,GAAgB,CAA5B,eACI,oBAAC,YAAD,MAXZ,CADJ,CAgBH","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport LessonDisplay from './LessonDisplay';\nimport api from '../../../services/api';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport EmptyDisplay from '../Empty/EmptyDisplay';\n\nimport './styles.scss';\n\nexport default function LessonWrapper() {\n    const [data, setData] = useState([]);\n    const [loading, setLoading] = useState(true)\n    const authKey = useSelector(state => state.auth.keys)\n\n    const fetchProjects = async (key=authKey) => {\n        setLoading(true)\n        try {\n            const response = await api({\n                method: 'get',\n                url: '/projects',\n                headers: {\n                    'Authorization': `Bearer ${key[0].key}`\n                },\n            })\n            setData(response.data.filter( (pj) => pj.type == 'lesson' ))\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    useEffect(() => {\n        fetchProjects()\n    },[])\n\n    return(\n        <div className={`arr-wrapper ${data.length === 0 ? 'wrapper-center' : ''}`}>\n            {\n                loading ?\n                    <div className=\"lds-dual-ring\"></div>\n                    :\n                data.map((el, key) => (\n                    <LessonDisplay key={key} {...el}/>\n                ))\n            }   \n            {\n                !loading && data.length === 0 && \n                    <EmptyDisplay />\n            }\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}