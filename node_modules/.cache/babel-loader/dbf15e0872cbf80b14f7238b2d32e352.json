{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/Dialog/components/CheckoutDialog/CheckoutDialog.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from 'services/api';\nimport { useForm } from 'react-hook-form';\nimport { clearCart } from 'store/ducks/shop';\nimport Modal from '../../../aux/Modal';\nimport WarningDialog from '../../../aux/WarningDialog/WarningDialog';\nimport Dialog from '../../Dialog';\nimport CheckoutCartElement from '../../../list_elements/CartElement/CheckoutCartElement';\nimport './styles.scss';\nexport default function CheckoutDialog({\n  handler\n}) {\n  const {\n    register,\n    handleSubmit,\n    errors,\n    watch\n  } = useForm();\n  const [loading, setLoading] = useState(false);\n  const [warning, setWarning] = useState(false);\n  const dispatch = useDispatch();\n  const authKey = useSelector(state => state.auth.keys);\n  const cart = useSelector(state => state.shop.cart);\n\n  const onSubmit = async ({\n    autor_msg\n  }) => {\n    setLoading(true);\n\n    try {\n      const response = await api({\n        method: 'post',\n        url: '/solicitation',\n        headers: {\n          'Authorization': `Bearer ${authKey[0].key}`\n        },\n        data: [{ ...cart\n        }, {\n          autor_msg\n        }]\n      });\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setLoading(false);\n      dispatch(clearCart());\n      handler();\n    }\n  };\n\n  console.log(watch('autor_msg'));\n\n  const sendSolicitation = async ({\n    autor_msg\n  }) => {\n    setLoading(true);\n\n    try {\n      const response = await api({\n        method: 'post',\n        url: '/solicitation',\n        headers: {\n          'Authorization': `Bearer ${authKey[0].key}`\n        },\n        data: [{ ...cart\n        }, {\n          autor_msg\n        }]\n      });\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setLoading(false);\n      dispatch(clearCart());\n      handler();\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dialog, {\n    handler: handler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"checkout-dialog-landscape\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"checkout-dialog-landscape__header--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, \"Solicita\\xE7\\xF5es\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__content--info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }, \"Sobre\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"info-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }, \"Voc\\xEA est\\xE1 realizando uma solicita\\xE7\\xE3o a um membro da plataforma. Esta solicita\\xE7\\xE3o tem car\\xE1ter caritativo e n\\xE3o visa lucros. O solicitado poder\\xE1 \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 208\n    }\n  }, \"recusar\"), \" o pedido caso n\\xE3o possa atend\\xEA-lo.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, \"Doa\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"info-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, \"Caso o pedido seja aprovado considere fazer um donativo para cobrir custos materiais do arranjo. Poder\\xE1 ser entregue no local de retirada ou diretamente do website.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, \"Mensagem\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"info-container__msg\",\n    id: \"autor_msg\",\n    name: \"autor_msg\",\n    ref: register({\n      required: true,\n      minLength: 5\n    }),\n    placeholder: \"Escreva uma breve sauda\\xE7\\xE3o explicando a finalidade e a motivo da solicita\\xE7\\xE3o.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__content--prod\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }), cart.map(el => /*#__PURE__*/React.createElement(CheckoutCartElement, Object.assign({}, el, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 37\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__content--footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setWarning('Você está prestes a notificar o autor sobre uma solicitação... Confirmar?'),\n    type: \"button\",\n    className: \"app-btn filled-btn done-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 48\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 59\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 48\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 59\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }, \"Concluir\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"checkout-dialog-portrait__header--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }, \"Solicita\\xE7\\xF5es\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__content--info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }, \"Sobre\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"info-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  }, \"Voc\\xEA est\\xE1 realizando uma solicita\\xE7\\xE3o a um membro da plataforma. Esta solicita\\xE7\\xE3o tem car\\xE1ter caritativo e n\\xE3o visa lucros. O solicitado poder\\xE1 \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 208\n    }\n  }, \"recusar\"), \" o pedido caso n\\xE3o possa atend\\xEA-lo.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 29\n    }\n  }, \"Doa\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"info-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }, \"Caso o pedido seja aprovado considere fazer um donativo para cobrir custos materiais do arranjo. Poder\\xE1 ser entregue no local de retirada ou diretamente do website.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    id: \"solicitation_handler\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 29\n    }\n  }, \"Mensagem\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"info-container__msg\",\n    id: \"autor_msg\",\n    name: \"autor_msg\",\n    ref: register({\n      required: true,\n      minLength: 5\n    }),\n    placeholder: \"Escreva uma breve sauda\\xE7\\xE3o explicando a finalidade e a motivo da solicita\\xE7\\xE3o.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"orders-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, \"Arranjos Escolhidos\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__content--orders\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 21\n    }\n  }, cart.map(el => /*#__PURE__*/React.createElement(CheckoutCartElement, Object.assign({}, el, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__content--footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setWarning('Você está prestes a notificar o autor sobre uma solicitação... Confirmar?'),\n    className: \"app-btn filled-btn done-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 52\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 63\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 52\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 63\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 33\n    }\n  }, \"Concluir\")))))), warning && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(WarningDialog, {\n    handler: () => setWarning(false),\n    value: warning,\n    form_id: \"solicitation_handler\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  })));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/Dialog/components/CheckoutDialog/CheckoutDialog.js"],"names":["React","useState","useEffect","useSelector","useDispatch","api","useForm","clearCart","Modal","WarningDialog","Dialog","CheckoutCartElement","CheckoutDialog","handler","register","handleSubmit","errors","watch","loading","setLoading","warning","setWarning","dispatch","authKey","state","auth","keys","cart","shop","onSubmit","autor_msg","response","method","url","headers","key","data","e","console","log","sendSolicitation","required","minLength","map","el"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from 'services/api';\nimport { useForm } from 'react-hook-form';\nimport { clearCart } from 'store/ducks/shop';\n\nimport Modal from '../../../aux/Modal';\nimport WarningDialog from '../../../aux/WarningDialog/WarningDialog';\nimport Dialog from '../../Dialog';\nimport CheckoutCartElement from '../../../list_elements/CartElement/CheckoutCartElement';\n\nimport './styles.scss';\n\nexport default function CheckoutDialog({handler}) {\n    const { register, handleSubmit, errors, watch } = useForm();\n    const [loading, setLoading] = useState(false)\n    const [warning, setWarning] = useState(false)\n    const dispatch = useDispatch();\n    const authKey = useSelector(state => state.auth.keys);\n    const cart = useSelector(state => state.shop.cart);\n\n    const onSubmit = async ({ autor_msg }) => {\n        setLoading(true)\n        try {\n            const response = await api({\n                method: 'post',\n                url: '/solicitation',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`,\n                },\n                data: [{...cart}, { autor_msg }]\n            })\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false)\n            dispatch(clearCart())\n            handler()\n        }\n    }\n\n    console.log(watch('autor_msg'))\n\n    const sendSolicitation = async ({ autor_msg }) => {\n        setLoading(true)\n        try {\n            const response = await api({\n                method: 'post',\n                url: '/solicitation',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`,\n                },\n                data: [{...cart}, { autor_msg }]\n            })\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false)\n            dispatch(clearCart())\n            handler()\n        }\n    }\n\n    return (\n        <>\n        <Dialog handler={handler}>\n            <form className=\"checkout-dialog-landscape\" \n                onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"checkout-dialog-landscape__header\">\n                    <h1 className=\"checkout-dialog-landscape__header--text\">Solicitações</h1>\n                </div>\n                <div className=\"checkout-dialog-landscape__content\">\n                    <div className=\"checkout-dialog-landscape__content--info\">\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Sobre</h2>\n                            <p className=\"info-container__text\">Você está realizando uma solicitação a um membro da plataforma. Esta solicitação tem caráter caritativo e não visa lucros. O solicitado poderá <b>recusar</b> o pedido caso não possa atendê-lo.</p>\n                        </div>\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Doações</h2>\n                            <p className=\"info-container__text\">Caso o pedido seja aprovado considere fazer um donativo para cobrir custos materiais do arranjo. Poderá ser entregue no local de retirada ou diretamente do website.</p>\n                        </div>\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Mensagem</h2>\n                            <textarea className=\"info-container__msg\" \n                                id=\"autor_msg\" name=\"autor_msg\" \n                                ref={register({required: true, minLength: 5})}\n                                placeholder=\"Escreva uma breve saudação explicando a finalidade e a motivo da solicitação.\">\n                            </textarea>\n                        </div>\n                    </div>\n                    <div className=\"checkout-dialog-landscape__content--prod\">\n                        <div className=\"order-container\">\n                            <div className=\"order-overlay\"></div>\n                            {\n                                cart.map((el) => (\n                                    <CheckoutCartElement {...el}/>\n                                ))\n                            }\n                        </div>\n                    </div>\n                </div>\n                <div className=\"checkout-dialog-landscape__content--footer\">\n                    <button onClick={() => setWarning('Você está prestes a notificar o autor sobre uma solicitação... Confirmar?')} type=\"button\"\n                        className=\"app-btn filled-btn done-btn\">\n                        {\n                            loading === true ? <div className=\"sizer\">\n                                <div class=\"lds-ellipsis\"><div></div>\n                                    <div></div><div></div><div></div></div>\n                            </div>\n                            :\n                            <p>Concluir</p>\n                        }\n                    </button>\n                </div>\n            </form>\n            {/* \n                PORTRAIT\n                */}\n            <div className=\"checkout-dialog-portrait\">\n                <div className=\"checkout-dialog-portrait__header\">\n                    <h1 className=\"checkout-dialog-portrait__header--text\">\n                        Solicitações</h1>\n                </div>\n                <div className=\"checkout-dialog-portrait__content\">\n                    <div className=\"checkout-dialog-portrait__content--info\">\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Sobre</h2>\n                            <p className=\"info-container__text\">Você está realizando uma solicitação a um membro da plataforma. Esta solicitação tem caráter caritativo e não visa lucros. O solicitado poderá <b>recusar</b> o pedido caso não possa atendê-lo.</p>\n                        </div>\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Doações</h2>\n                            <p className=\"info-container__text\">Caso o pedido seja aprovado considere fazer um donativo para cobrir custos materiais do arranjo. Poderá ser entregue no local de retirada ou diretamente do website.</p>\n                        </div>\n                        <div className=\"info-container\">\n                            <form id=\"solicitation_handler\" onSubmit={handleSubmit(onSubmit)}>\n                            <h2 className=\"info-container__title\">Mensagem</h2>\n                            <textarea className=\"info-container__msg\" \n                                id=\"autor_msg\" name=\"autor_msg\" \n                                ref={register({required: true, minLength: 5})}\n                                placeholder=\"Escreva uma breve saudação explicando a finalidade e a motivo da solicitação.\">\n                            </textarea>\n                            </form>\n                        </div>\n                    </div>\n                    <h2 className=\"orders-title\">Arranjos Escolhidos</h2>\n                    <div className=\"checkout-dialog-portrait__content--orders\">\n                        {\n                            cart.map((el) => (\n                                <CheckoutCartElement {...el}/>\n                            ))\n                        }\n                    </div>\n                    <div className=\"checkout-dialog-portrait__content--footer\">\n                        <button onClick={() => setWarning('Você está prestes a notificar o autor sobre uma solicitação... Confirmar?')} \n                            className=\"app-btn filled-btn done-btn\">\n                            {\n                                loading === true ? <div className=\"sizer\">\n                                    <div class=\"lds-ellipsis\"><div></div>\n                                        <div></div><div></div><div></div></div>\n                                </div>\n                                :\n                                <p>Concluir</p>\n                            }\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </Dialog>\n            {\n                warning &&\n                    <Modal>\n                        <WarningDialog handler={() => setWarning(false)} value={warning} form_id=\"solicitation_handler\"/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}