{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana_production/src/components/Dialog/components/CheckoutDialog/CheckoutDialog.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from 'services/api';\nimport { useForm } from 'react-hook-form';\nimport { clearCart } from 'store/ducks/shop';\nimport Modal from '../../../aux/Modal';\nimport WarningDialog from '../../../aux/WarningDialog/WarningDialog';\nimport Dialog from '../../Dialog';\nimport CheckoutCartElement from '../../../list_elements/CartElement/CheckoutCartElement';\nimport './styles.scss';\nexport default function CheckoutDialog({\n  handler\n}) {\n  const {\n    register,\n    errors,\n    watch\n  } = useForm();\n  const [loading, setLoading] = useState(false);\n  const [warning, setWarning] = useState(false);\n  const [message, setMessage] = useState(false);\n  const dispatch = useDispatch();\n  const authKey = useSelector(state => state.auth.keys);\n  const cart = useSelector(state => state.shop.cart);\n\n  const sendSolicitation = async () => {\n    setLoading(true);\n\n    try {\n      const response = await api({\n        method: 'post',\n        url: '/solicitation',\n        headers: {\n          'Authorization': `Bearer ${authKey[0].key}`\n        },\n        data: [{ ...cart\n        }, {\n          autor_msg: message\n        }]\n      });\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setLoading(false);\n      dispatch(clearCart());\n      handler();\n    }\n  };\n\n  useEffect(() => {\n    setMessage(watch('autor_msg'));\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Dialog, {\n    handler: handler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"checkout-dialog-landscape\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"checkout-dialog-landscape__header--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, \"Solicita\\xE7\\xF5es\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__content--info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 29\n    }\n  }, \"Sobre\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"info-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 29\n    }\n  }, \"Voc\\xEA est\\xE1 realizando uma solicita\\xE7\\xE3o a um membro da plataforma. Esta solicita\\xE7\\xE3o tem car\\xE1ter caritativo e n\\xE3o visa lucros. O solicitado poder\\xE1 \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 208\n    }\n  }, \"recusar\"), \" o pedido caso n\\xE3o possa atend\\xEA-lo.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 29\n    }\n  }, \"Doa\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"info-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 29\n    }\n  }, \"Caso o pedido seja aprovado considere fazer um donativo para cobrir custos materiais do arranjo. Poder\\xE1 ser entregue no local de retirada.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 29\n    }\n  }, \"Mensagem\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"info-container__msg\",\n    id: \"autor_msg\",\n    name: \"autor_msg\",\n    ref: register({\n      required: true,\n      minLength: 5\n    }),\n    placeholder: \"Escreva uma breve sauda\\xE7\\xE3o explicando a finalidade e a motivo da solicita\\xE7\\xE3o.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__content--prod\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"order-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }), cart.map((el, key) => /*#__PURE__*/React.createElement(CheckoutCartElement, Object.assign({\n    key: key\n  }, el, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 37\n    }\n  })))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-landscape__content--footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setWarning('Você está prestes a notificar o autor sobre uma solicitação... Confirmar?'),\n    type: \"button\",\n    className: \"app-btn filled-btn done-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 48\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 59\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 48\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 59\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, \"Concluir\")))), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"checkout-dialog-portrait\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"checkout-dialog-portrait__header--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \"Solicita\\xE7\\xF5es\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__content--info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 29\n    }\n  }, \"Sobre\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"info-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }, \"Voc\\xEA est\\xE1 realizando uma solicita\\xE7\\xE3o a um membro da plataforma. Esta solicita\\xE7\\xE3o tem car\\xE1ter caritativo e n\\xE3o visa lucros. O solicitado poder\\xE1 \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 208\n    }\n  }, \"recusar\"), \" o pedido caso n\\xE3o possa atend\\xEA-lo.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, \"Doa\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"info-container__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, \"Caso o pedido seja aprovado considere fazer um donativo para cobrir custos materiais do arranjo. Poder\\xE1 ser entregue no local de retirada.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"info-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"info-container__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }, \"Mensagem\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"info-container__msg\",\n    id: \"autor_msg\",\n    name: \"autor_msg\",\n    ref: register({\n      required: true,\n      minLength: 5\n    }),\n    placeholder: \"Escreva uma breve sauda\\xE7\\xE3o explicando a finalidade e a motivo da solicita\\xE7\\xE3o.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"orders-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, \"Arranjos Escolhidos\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__content--orders\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, cart.map((el, key) => /*#__PURE__*/React.createElement(CheckoutCartElement, Object.assign({}, el, {\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-dialog-portrait__content--footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setWarning('Você está prestes a notificar o autor sobre uma solicitação... Confirmar?'),\n    type: \"button\",\n    className: \"app-btn filled-btn done-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 52\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 63\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 52\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 63\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 33\n    }\n  }, \"Concluir\")))))), warning && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(WarningDialog, {\n    handler: () => setWarning(false),\n    value: warning,\n    accept: sendSolicitation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  })));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana_production/src/components/Dialog/components/CheckoutDialog/CheckoutDialog.js"],"names":["React","useState","useEffect","useSelector","useDispatch","api","useForm","clearCart","Modal","WarningDialog","Dialog","CheckoutCartElement","CheckoutDialog","handler","register","errors","watch","loading","setLoading","warning","setWarning","message","setMessage","dispatch","authKey","state","auth","keys","cart","shop","sendSolicitation","response","method","url","headers","key","data","autor_msg","e","console","log","required","minLength","map","el"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from 'services/api';\nimport { useForm } from 'react-hook-form';\nimport { clearCart } from 'store/ducks/shop';\n\nimport Modal from '../../../aux/Modal';\nimport WarningDialog from '../../../aux/WarningDialog/WarningDialog';\nimport Dialog from '../../Dialog';\nimport CheckoutCartElement from '../../../list_elements/CartElement/CheckoutCartElement';\n\nimport './styles.scss';\n\nexport default function CheckoutDialog({handler}) {\n    const { register, errors, watch } = useForm();\n    const [loading, setLoading] = useState(false);\n    const [warning, setWarning] = useState(false);\n    const [message, setMessage] = useState(false);\n    const dispatch = useDispatch();\n    const authKey = useSelector(state => state.auth.keys);\n    const cart = useSelector(state => state.shop.cart);\n\n    const sendSolicitation = async () => {\n        setLoading(true)\n        try {\n            const response = await api({\n                method: 'post',\n                url: '/solicitation',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`,\n                },\n                data: [\n                    {...cart}, \n                    {autor_msg: message}\n                ]\n            })\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false)\n            dispatch(clearCart())\n            handler()\n        }\n    }\n\n    useEffect(() => {\n        setMessage(watch('autor_msg'))\n    })\n\n    return (\n        <>\n        <Dialog handler={handler}>\n            <form className=\"checkout-dialog-landscape\">\n                <div className=\"checkout-dialog-landscape__header\">\n                    <h1 className=\"checkout-dialog-landscape__header--text\">Solicitações</h1>\n                </div>\n                <div className=\"checkout-dialog-landscape__content\">\n                    <div className=\"checkout-dialog-landscape__content--info\">\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Sobre</h2>\n                            <p className=\"info-container__text\">Você está realizando uma solicitação a um membro da plataforma. Esta solicitação tem caráter caritativo e não visa lucros. O solicitado poderá <b>recusar</b> o pedido caso não possa atendê-lo.</p>\n                        </div>\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Doações</h2>\n                            <p className=\"info-container__text\">Caso o pedido seja aprovado considere fazer um donativo para cobrir custos materiais do arranjo. Poderá ser entregue no local de retirada.</p>\n                        </div>\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Mensagem</h2>\n                            <textarea className=\"info-container__msg\" \n                                id=\"autor_msg\" name=\"autor_msg\" \n                                ref={register({required: true, minLength: 5})}\n                                placeholder=\"Escreva uma breve saudação explicando a finalidade e a motivo da solicitação.\">\n                            </textarea>\n                        </div>\n                    </div>\n                    <div className=\"checkout-dialog-landscape__content--prod\">\n                        <div className=\"order-container\">\n                            <div className=\"order-overlay\"></div>\n                            {\n                                cart.map((el, key) => (\n                                    <CheckoutCartElement key={key} {...el}/>\n                                ))\n                            }\n                        </div>\n                    </div>\n                </div>\n                <div className=\"checkout-dialog-landscape__content--footer\">\n                    <button onClick={() => setWarning('Você está prestes a notificar o autor sobre uma solicitação... Confirmar?')} type=\"button\"\n                        className=\"app-btn filled-btn done-btn\">\n                        {\n                            loading === true ? <div className=\"sizer\">\n                                <div class=\"lds-ellipsis\"><div></div>\n                                    <div></div><div></div><div></div></div>\n                            </div>\n                            :\n                            <p>Concluir</p>\n                        }\n                    </button>\n                </div>\n            </form>\n            {/* \n                PORTRAIT\n                */}\n            <form className=\"checkout-dialog-portrait\">\n                <div className=\"checkout-dialog-portrait__header\">\n                    <h1 className=\"checkout-dialog-portrait__header--text\">\n                        Solicitações</h1>\n                </div>\n                <div className=\"checkout-dialog-portrait__content\">\n                    <div className=\"checkout-dialog-portrait__content--info\">\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Sobre</h2>\n                            <p className=\"info-container__text\">Você está realizando uma solicitação a um membro da plataforma. Esta solicitação tem caráter caritativo e não visa lucros. O solicitado poderá <b>recusar</b> o pedido caso não possa atendê-lo.</p>\n                        </div>\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Doações</h2>\n                            <p className=\"info-container__text\">Caso o pedido seja aprovado considere fazer um donativo para cobrir custos materiais do arranjo. Poderá ser entregue no local de retirada.</p>\n                        </div>\n                        <div className=\"info-container\">\n                            <h2 className=\"info-container__title\">Mensagem</h2>\n                            <textarea className=\"info-container__msg\" \n                                id=\"autor_msg\" name=\"autor_msg\" \n                                ref={register({required: true, minLength: 5})}\n                                placeholder=\"Escreva uma breve saudação explicando a finalidade e a motivo da solicitação.\">\n                            </textarea>\n                        </div>\n                    </div>\n                    <h2 className=\"orders-title\">Arranjos Escolhidos</h2>\n                    <div className=\"checkout-dialog-portrait__content--orders\">\n                        {\n                            cart.map((el, key) => (\n                                <CheckoutCartElement {...el} key={key}/>\n                            ))\n                        }\n                    </div>\n                    <div className=\"checkout-dialog-portrait__content--footer\">\n                        <button onClick={() => setWarning('Você está prestes a notificar o autor sobre uma solicitação... Confirmar?')} \n                            type=\"button\" className=\"app-btn filled-btn done-btn\">\n                            {\n                                loading === true ? <div className=\"sizer\">\n                                    <div class=\"lds-ellipsis\"><div></div>\n                                        <div></div><div></div><div></div></div>\n                                </div>\n                                :\n                                <p>Concluir</p>\n                            }\n                        </button>\n                    </div>\n                </div>\n            </form>\n        </Dialog>\n            {\n                warning &&\n                    <Modal>\n                        <WarningDialog handler={() => setWarning(false)} value={warning} accept={sendSolicitation}/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}