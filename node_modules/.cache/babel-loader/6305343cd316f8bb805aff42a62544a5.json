{"ast":null,"code":"import _regeneratorRuntime from\"/home/fabricio7p/Documents/Projects/Ikebana_production/reactapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fabricio7p/Documents/Projects/Ikebana_production/reactapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fabricio7p/Documents/Projects/Ikebana_production/reactapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import api from'services/api';import{useForm}from'react-hook-form';import Modal from'../../../../aux/Modal';import ErrorDialog from'../../../../aux/ErrorDialog/ErrorDialog';import InfoDialog from'../../../../aux/InfoDialog/InfoDialog';import WarningDialog from'../../../../aux/WarningDialog/WarningDialog';import'./styles.scss';export default function EditAccount(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors,watch=_useForm.watch;var authKey=useSelector(function(state){return state.auth.keys;});var userData=useSelector(function(state){return state.account.userData[0];});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),filePayload=_useState2[0],setFilePayload=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),inputFile=_useState4[0],setInputFile=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),info=_useState10[0],setInfo=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),warning=_useState12[0],setWarning=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),data=_useState14[0],setData=_useState14[1];var handleInputChange=function handleInputChange(e){var file=e.target.files[0];if(!file){setError('Selecione alguma foto');return void 0;}if((file.size/1024/1024).toFixed()>5){setError('Selecione um arquivo menor que 5MB');return void 0;}if(!['image/png','image/jpeg'].includes(file.type)){setError('Formato inválido, selecione apenas imagens JPG ou PNG');return void 0;}setInputFile(URL.createObjectURL(e.target.files[0]));setFilePayload(file);};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var fullname,bio,formData,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:fullname=_ref.fullname,bio=_ref.bio;setLoading(true);formData=new FormData();_context.prev=3;formData.append('file',filePayload);formData.append('fullname',fullname);formData.append('bio',bio);_context.next=9;return api({method:'post',url:'/user',headers:{'Authorization':\"Bearer \".concat(authKey[0].key),'Content-Type':'multipart/form-data'},data:formData});case 9:response=_context.sent;response.data&&setInfo('Dados atualizados');_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](3);window.location.pathname='/refresh';case 16:_context.prev=16;setLoading(false);return _context.finish(16);case 19:case\"end\":return _context.stop();}}},_callee,null,[[3,13,16,19]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();var clearNotifications=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.prev=1;_context2.next=4;return api({method:'delete',url:'/user',headers:{'Authorization':\"Bearer \".concat(authKey[0].key)}});case 4:response=_context2.sent;console.log(response.data);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 11:_context2.prev=11;setLoading(false);return _context2.finish(11);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8,11,14]]);}));return function clearNotifications(){return _ref3.apply(this,arguments);};}();useEffect(function(){setData(userData);},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"edit\"},/*#__PURE__*/React.createElement(\"div\",{className:\"edit__header\"},/*#__PURE__*/React.createElement(\"p\",{className:\"edit__header--title\"},\"Editar informa\\xE7\\xF5es pessoais.\")),/*#__PURE__*/React.createElement(\"div\",{className:\"edit__inputs\"},/*#__PURE__*/React.createElement(\"p\",{className:\"edit__inputs--desc\"},\"Informa\\xE7\\xF5es p\\xFAblicas da conta.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"edit__inputs--container acc-field\"},/*#__PURE__*/React.createElement(\"label\",{className:\"input-label acc-field__title\",htmlFor:\"picture\"},/*#__PURE__*/React.createElement(\"img\",{className:\"edit__inputs--picture\",src:!inputFile?data.picture:inputFile,alt:\"profile picture\"})),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",ref:register(),onChange:handleInputChange,className:\"account-input img-input\",name:\"picture\",id:\"picture\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit__inputs--container acc-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"fullname\",className:\"input-label acc-field__title\"},\"Nome Completo\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",ref:register({required:true}),className:\"account-input\",defaultValue:data.fullname,name:\"fullname\",id:\"fullname\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit__inputs--container acc-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\",className:\"input-label acc-field__title\"},\"E-mail\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"account-input email\",value:data.email})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit__inputs--container acc-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"bio\",className:\"input-label acc-field__title\"},\"Biografia\"),/*#__PURE__*/React.createElement(\"textarea\",{className:\"account-input\",name:\"bio\",ref:register({maxLength:350}),defaultValue:data.bio!==''?data.bio:null,placeholder:\"Fa\\xE7a uma breve descri\\xE7\\xE3o sobre voc\\xEA e sua experi\\xEAncia com Ikebana, m\\xE1ximo 350 caract\\xE9res.\",id:\"bio\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"bio-counter\"},watch(\"bio\")?watch(\"bio\").length:'')),/*#__PURE__*/React.createElement(\"div\",{className:\"edit__inputs--container acc-field\"},/*#__PURE__*/React.createElement(\"label\",{className:\"input-label acc-field__title\"},\"Mensagens\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"del-btn\"},loading===true?/*#__PURE__*/React.createElement(\"div\",{className:\"sizer\"},/*#__PURE__*/React.createElement(\"div\",{class:\"lds-ellipsis\"},/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null))):/*#__PURE__*/React.createElement(\"p\",{onClick:function onClick(){return setWarning('Deseja realmente excluir todas as notificações?');}},\"Limpar Notifica\\xE7\\xF5es\"))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"app-btn btn-filled\"},loading===true?/*#__PURE__*/React.createElement(\"div\",{className:\"sizer\"},/*#__PURE__*/React.createElement(\"div\",{class:\"lds-ellipsis\"},/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null))):/*#__PURE__*/React.createElement(\"p\",null,userData.isPartner===true?'Atualizar':'Concluir'))))),error&&/*#__PURE__*/React.createElement(Modal,null,/*#__PURE__*/React.createElement(ErrorDialog,{value:error,handler:function handler(){setError(false);window.location.reload();}})),info&&/*#__PURE__*/React.createElement(Modal,null,/*#__PURE__*/React.createElement(InfoDialog,{value:info,handler:function handler(){setInfo(false);window.location.reload();}})),warning&&/*#__PURE__*/React.createElement(Modal,null,/*#__PURE__*/React.createElement(WarningDialog,{value:warning,handler:function handler(){setWarning(false);window.location.reload();},accept:function accept(){clearNotifications();setWarning(false);window.location.reload();}})));}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana_production/reactapp/src/components/pages/Account/components/EditAccount/EditAccount.js"],"names":["React","useState","useEffect","useDispatch","useSelector","api","useForm","Modal","ErrorDialog","InfoDialog","WarningDialog","EditAccount","register","handleSubmit","errors","watch","authKey","state","auth","keys","userData","account","filePayload","setFilePayload","inputFile","setInputFile","loading","setLoading","error","setError","info","setInfo","warning","setWarning","data","setData","handleInputChange","e","file","target","files","size","toFixed","includes","type","URL","createObjectURL","onSubmit","fullname","bio","formData","FormData","append","method","url","headers","key","response","window","location","pathname","clearNotifications","console","log","picture","required","email","maxLength","length","isPartner","reload"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api'\nimport { useForm } from 'react-hook-form';\n\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\nimport InfoDialog from '../../../../aux/InfoDialog/InfoDialog';\nimport WarningDialog from '../../../../aux/WarningDialog/WarningDialog';\n\nimport './styles.scss';\n\nexport default function EditAccount() {\n    const { register, handleSubmit, errors, watch } = useForm();\n    const authKey = useSelector(state => state.auth.keys)\n    const userData = useSelector(state => state.account.userData[0])\n    \n    const [filePayload, setFilePayload] = useState(false);\n    const [inputFile, setInputFile] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [info, setInfo] = useState(false);\n    const [warning, setWarning] = useState(false);\n    const [data, setData] = useState(false);\n\n    const handleInputChange = (e) => {\n        const file = e.target.files[0]\n\n        if (!file) {\n            setError('Selecione alguma foto')\n            return void 0\n        }\n        \n        if (((file.size/1024)/1024).toFixed() > 5) {\n            setError('Selecione um arquivo menor que 5MB')\n            return void 0\n        }\n\n        if (!(['image/png', 'image/jpeg'].includes(file.type))){\n            setError('Formato inválido, selecione apenas imagens JPG ou PNG')\n            return void 0\n        }\n\n        setInputFile(URL.createObjectURL(e.target.files[0]))\n        setFilePayload(file)\n    }\n\n    const onSubmit = async ({ fullname, bio}) => {\n        setLoading(true)\n        const formData = new FormData()\n        try {\n            formData.append('file', filePayload)\n            formData.append('fullname', fullname)\n            formData.append('bio', bio)\n            const response = await api({\n                method: 'post',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`,\n                    'Content-Type': 'multipart/form-data'\n                },\n                data: formData\n            })\n            response.data && setInfo('Dados atualizados')\n        } catch(e) {\n            window.location.pathname = '/refresh'\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    const clearNotifications = async () => {\n        setLoading(true)\n        try {\n            const response = await api({\n                method: 'delete',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`\n                },\n            })\n            console.log(response.data)\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    useEffect(() => {\n        setData(userData)\n    },[])\n\n    return(\n        <>\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"edit\">\n                    <div className=\"edit__header\">\n                        <p className=\"edit__header--title\">Editar informações pessoais.</p>\n                    </div>\n                    <div className=\"edit__inputs\">\n                        <p className=\"edit__inputs--desc\">Informações públicas da conta.</p>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label className=\"input-label acc-field__title\" \n                                htmlFor=\"picture\">\n                                <img className=\"edit__inputs--picture\" \n                                    src={!inputFile ? data.picture : inputFile} \n                                alt=\"profile picture\"/>\n                            </label>\n                                <input type=\"file\" ref={register()} \n                                    onChange={handleInputChange} \n                            className=\"account-input img-input\" name=\"picture\" \n                            id=\"picture\"/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"fullname\" \n                                className=\"input-label acc-field__title\">Nome Completo</label>\n                            <input type=\"text\" ref={register({required: true})} \n                                className=\"account-input\" defaultValue={data.fullname} \n                            name=\"fullname\" id=\"fullname\"/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"email\" \n                                className=\"input-label acc-field__title\">E-mail</label>\n                            <input type=\"text\" className=\"account-input email\" value={data.email}/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"bio\" \n                                className=\"input-label acc-field__title\">Biografia</label>\n                            <textarea className=\"account-input\" name=\"bio\" \n                                ref={register({maxLength: 350})} defaultValue={data.bio !== '' ? data.bio : null}\n                                placeholder=\"Faça uma breve descrição sobre você e sua experiência com Ikebana, máximo 350 caractéres.\" id=\"bio\">\n                            </textarea>\n                            <p className=\"bio-counter\">{ watch(\"bio\") ? \n                                    watch(\"bio\").length : '' }</p>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label className=\"input-label acc-field__title\">\n                            Mensagens</label>\n                            <button type=\"button\" className=\"del-btn\">\n                                {\n                                    loading === true ? <div className=\"sizer\">\n                                        <div class=\"lds-ellipsis\"><div></div>\n                                            <div></div><div></div><div></div></div>\n                                    </div>\n                                    :\n                                    <p onClick={() => setWarning('Deseja realmente excluir todas as notificações?')}>Limpar Notificações</p>\n                                }\n                            </button>\n                        </div>\n                        <button type=\"submit\" \n                        className=\"app-btn btn-filled\">\n                            {\n                                loading === true ? <div className=\"sizer\">\n                                    <div class=\"lds-ellipsis\"><div></div>\n                                        <div></div><div></div><div></div></div>\n                                </div>\n                                :\n                                <p>{ userData.isPartner === true ? 'Atualizar' : 'Concluir' }</p>\n                            }\n                        </button>\n                    </div>\n                </div>\n            </form>\n            {\n                error &&\n                    <Modal>\n                        <ErrorDialog value={error} handler={() =>{\n                            setError(false)\n                            window.location.reload()\n                        } }/>\n                    </Modal>\n            }\n            {\n                info &&\n                    <Modal>\n                        <InfoDialog value={info} handler={() => {\n                            setInfo(false)\n                            window.location.reload()\n                        }}/>\n                    </Modal>\n            }\n            {\n                warning &&\n                    <Modal>\n                        <WarningDialog value={warning} handler={() => {\n                            setWarning(false)\n                            window.location.reload()\n                        }} accept={() => {\n                            clearNotifications()\n                            setWarning(false)\n                            window.location.reload()\n                        }}/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}