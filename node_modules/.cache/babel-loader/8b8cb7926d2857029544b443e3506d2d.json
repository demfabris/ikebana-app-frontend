{"ast":null,"code":"import _slicedToArray from \"/home/fabricio7p/Documents/Projects/Ikebana/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/pages/Account/Account.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from 'services/api';\nimport { storeUserData, clearUserData } from 'store/ducks/account';\nimport Join from './components/Join/Join';\nimport EditAccount from './components/EditAccount/EditAccount';\nimport Password from './components/Password/Password';\nimport NewProject from './components/New/NewProject';\nimport EditProject from './components/Edit/EditProject';\nimport './styles.scss';\n\nfunction Blank() {\n  return React.createElement(React.Fragment, null);\n}\n\nexport default function Account() {\n  const _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        loading = _useState2[0],\n        setLoading = _useState2[1];\n\n  const dispatch = useDispatch();\n  const authKey = useSelector(state => state.auth.keys);\n\n  const hitApi = async key => {\n    try {\n      const response = await api({\n        method: 'get',\n        url: '/user',\n        headers: {\n          'Authorization': `Bearer ${key[0].key}`\n        }\n      });\n      dispatch(storeUserData(response.data));\n    } catch (e) {\n      if (e.message.includes('401')) {\n        window.location.pathname = \"/refresh\";\n      }\n    } finally {\n      setLoading(false);\n    }\n  }; //TAB handling\n\n\n  const _useState3 = useState('blank'),\n        _useState4 = _slicedToArray(_useState3, 2),\n        active = _useState4[0],\n        setActive = _useState4[1];\n\n  const tabsComponent = {\n    'blank': Blank,\n    'join': Join,\n    'password': Password,\n    'edit': EditAccount,\n    'new_project': NewProject,\n    'edit_project': EditProject\n  };\n  const ActiveComponent = tabsComponent[active];\n  useEffect(() => {\n    const path = window.location.pathname.slice(9);\n    path && setActive(path);\n  }, []);\n\n  const handleClick = action => () => {\n    window.location.pathname = '/account/' + action;\n    setActive(action);\n  }; //auth handling\n\n\n  useEffect(() => {\n    if (authKey.length === 0) {\n      window.location.pathname = '/login';\n      alert('Você precisa entrar para acessar essa página');\n    } else {\n      hitApi(authKey);\n    }\n\n    return () => {\n      dispatch(clearUserData());\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"account\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"account-main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"account-main__sidebar\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"account-main__sidebar--list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    onClick: handleClick('join'),\n    className: `tab-element \n                            ${active === 'join' ? 'el-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: `tab-element__btn \n                                ${active === 'join' ? 'txt-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"Participar\")), React.createElement(\"li\", {\n    onClick: handleClick('edit'),\n    className: `tab-element \n                            ${active === 'edit' ? 'el-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: `tab-element__btn \n                                ${active === 'edit' ? 'txt-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Editar Informa\\xE7\\xF5es\")), React.createElement(\"li\", {\n    onClick: handleClick('password'),\n    className: `tab-element \n                            ${active === 'password' ? 'el-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: `tab-element__btn \n                                ${active === 'password' ? 'txt-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Senha\")), React.createElement(\"li\", {\n    onClick: handleClick('new_project'),\n    className: `tab-element \n                            ${active === 'new_project' ? 'el-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: `tab-element__btn \n                                ${active === 'new_project' ? 'txt-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Novo Projeto\")), React.createElement(\"li\", {\n    style: {\n      cursor: \"auto\"\n    },\n    className: `tab-element \n                            ${active === 'edit_project' ? 'el-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    style: {\n      color: \"#969696\",\n      cursor: \"auto\"\n    },\n    className: `tab-element__btn \n                                ${active === 'edit_project' ? 'txt-active' : ''}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, \"Editar Projeto\")))), React.createElement(\"div\", {\n    className: \"account-main__container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, !loading && React.createElement(ActiveComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }))));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/pages/Account/Account.js"],"names":["React","useEffect","useState","useSelector","useDispatch","api","storeUserData","clearUserData","Join","EditAccount","Password","NewProject","EditProject","Blank","Account","loading","setLoading","dispatch","authKey","state","auth","keys","hitApi","key","response","method","url","headers","data","e","message","includes","window","location","pathname","active","setActive","tabsComponent","ActiveComponent","path","slice","handleClick","action","length","alert","cursor","color"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from 'services/api';\n\nimport { storeUserData, clearUserData } from 'store/ducks/account';\n\nimport Join from './components/Join/Join';\nimport EditAccount from './components/EditAccount/EditAccount';\nimport Password from './components/Password/Password';\nimport NewProject from './components/New/NewProject';\nimport EditProject from './components/Edit/EditProject';\n\nimport './styles.scss';\n\nfunction Blank() {\n    return(\n        <>\n        </>\n    );\n}\n\nexport default function Account() {\n    const [loading, setLoading] = useState(true);\n    const dispatch = useDispatch();\n    const authKey = useSelector(state => state.auth.keys);\n\n    const hitApi = async (key) => {\n        try{\n            const response = await api({\n                method: 'get',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${key[0].key}`\n                },\n            })\n            dispatch(storeUserData(response.data))\n        } catch(e){\n            if (e.message.includes('401')) {\n                window.location.pathname=\"/refresh\"\n            }\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    //TAB handling\n    const [active, setActive] = useState('blank');\n    const tabsComponent = {\n        'blank': Blank,\n        'join': Join,\n        'password': Password,\n        'edit': EditAccount,\n        'new_project': NewProject,\n        'edit_project': EditProject\n    };\n    const ActiveComponent = tabsComponent[active];\n    \n    useEffect(() => {\n        const path = window.location.pathname.slice(9)\n        path && setActive(path);\n    }, []);\n\n    const handleClick = (action) => () => {\n        window.location.pathname = '/account/' + action;\n        setActive(action)\n    }\n\n    //auth handling\n    useEffect(() => {\n        if (authKey.length === 0) {\n            window.location.pathname = '/login'\n            alert('Você precisa entrar para acessar essa página')\n        } else {\n            hitApi(authKey)\n        }\n\n        return () => {\n            dispatch(clearUserData())\n        }\n    }, [])\n\n    return(\n        <div className=\"account\">\n            <div className=\"account-main\">\n                <div className=\"account-main__sidebar\">\n                    <ul className=\"account-main__sidebar--list\">\n                        <li onClick={handleClick('join')} \n                        className={`tab-element \n                            ${active === 'join' ? 'el-active' : ''}`}>\n                            <button className={`tab-element__btn \n                                ${active === 'join' ? 'txt-active' : ''}`}>\n                            Participar</button>\n                        </li>\n                        <li onClick={handleClick('edit')} \n                        className={`tab-element \n                            ${active === 'edit' ? 'el-active' : ''}`}>\n                            <button className={`tab-element__btn \n                                ${active === 'edit' ? 'txt-active' : ''}`}>\n                            Editar Informações</button>\n                        </li>\n                        <li onClick={handleClick('password')} \n                        className={`tab-element \n                            ${active === 'password' ? 'el-active' : ''}`}>\n                            <button className={`tab-element__btn \n                                ${active === 'password' ? 'txt-active' : ''}`}>\n                            Senha</button>\n                        </li>\n                        <li onClick={handleClick('new_project')} \n                        className={`tab-element \n                            ${active === 'new_project' ? 'el-active' : ''}`}>\n                            <button className={`tab-element__btn \n                                ${active === 'new_project' ? 'txt-active' : ''}`}>\n                            Novo Projeto</button>\n                        </li>\n                        <li style={{cursor: \"auto\"}} className={`tab-element \n                            ${active === 'edit_project' ? 'el-active' : ''}`}>\n                            <button style={{color: \"#969696\", cursor: \"auto\"}} \n                            className={`tab-element__btn \n                                ${active === 'edit_project' ? 'txt-active' : ''}`}>\n                            Editar Projeto</button>\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"account-main__container\">\n                    {\n                        !loading &&\n                            <ActiveComponent />\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}