{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/pages/Account/components/EditAccount/EditAccount.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api';\nimport { useForm } from 'react-hook-form';\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\nimport InfoDialog from '../../../../aux/InfoDialog/InfoDialog';\nimport WarningDialog from '../../../../aux/WarningDialog/WarningDialog';\nimport './styles.scss';\nexport default function EditAccount() {\n  const {\n    register,\n    handleSubmit,\n    errors,\n    watch\n  } = useForm();\n  const authKey = useSelector(state => state.auth.keys);\n  const userData = useSelector(state => state.account.userData[0]);\n  const [filePayload, setFilePayload] = useState(false);\n  const [inputFile, setInputFile] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [info, setInfo] = useState(false);\n  const [warning, setWarning] = useState(false);\n  const [data, setData] = useState(false);\n\n  const handleInputChange = e => {\n    const file = e.target.files[0];\n\n    if (!file) {\n      setError('Selecione alguma foto');\n      return void 0;\n    }\n\n    if ((file.size / 1024 / 1024).toFixed() > 5) {\n      setError('Selecione um arquivo menor que 5MB');\n      return void 0;\n    }\n\n    if (!['image/png', 'image/jpeg'].includes(file.type)) {\n      setError('Formato inválido, selecione apenas imagens JPG ou PNG');\n      return void 0;\n    }\n\n    setInputFile(URL.createObjectURL(e.target.files[0]));\n    setFilePayload(file);\n  };\n\n  const onSubmit = async ({\n    fullname,\n    bio\n  }) => {\n    setLoading(true);\n    const formData = new FormData();\n\n    try {\n      formData.append('file', filePayload);\n      formData.append('fullname', fullname);\n      formData.append('bio', bio);\n      const response = await api({\n        method: 'post',\n        url: '/user',\n        headers: {\n          'Authorization': `Bearer ${authKey[0].key}`,\n          'Content-Type': 'multipart/form-data'\n        },\n        data: formData\n      });\n      response.data && setInfo('Dados atualizados');\n    } catch (e) {\n      window.location.pathname = '/refresh';\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const clearNotifications = async () => {\n    setLoading(true);\n\n    try {\n      const response = await api({\n        method: 'delete',\n        url: '/user',\n        headers: {\n          'Authorization': `Bearer ${authKey[0].key}`\n        }\n      });\n      console.log(response.data);\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    setData(userData);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"edit__header--title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }, \"Editar informa\\xE7\\xF5es pessoais.\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"edit__inputs--desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, \"Informa\\xE7\\xF5es p\\xFAblicas da conta.\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"input-label acc-field__title\",\n    htmlFor: \"picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"edit__inputs--picture\",\n    src: !inputFile ? data.picture : inputFile,\n    alt: \"profile picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    ref: register(),\n    onChange: handleInputChange,\n    className: \"account-input img-input\",\n    name: \"picture\",\n    id: \"picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"fullname\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, \"Nome Completo\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    ref: register({\n      required: true\n    }),\n    className: \"account-input\",\n    defaultValue: data.fullname,\n    name: \"fullname\",\n    id: \"fullname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, \"E-mail\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input email\",\n    value: data.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"bio\",\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 29\n    }\n  }, \"Biografia\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"account-input\",\n    name: \"bio\",\n    ref: register({\n      maxLength: 350\n    }),\n    defaultValue: data.bio !== '' ? data.bio : null,\n    placeholder: \"Fa\\xE7a uma breve descri\\xE7\\xE3o sobre voc\\xEA e sua experi\\xEAncia com Ikebana, m\\xE1ximo 350 caract\\xE9res.\",\n    id: \"bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"bio-counter\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 29\n    }\n  }, watch(\"bio\") ? watch(\"bio\").length : '')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit__inputs--container acc-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"input-label acc-field__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }\n  }, \"Mensagens\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"del-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 29\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 56\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 67\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 56\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 67\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    onClick: () => setWarning('Deseja realmente excluir todas as notificações?'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 37\n    }\n  }, \"Limpar Notifica\\xE7\\xF5es\"))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"app-btn btn-filled\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, loading === true ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sizer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 52\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 63\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 52\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 63\n    }\n  }))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 33\n    }\n  }, userData.isPartner === true ? 'Atualizar' : 'Concluir'))))), error && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ErrorDialog, {\n    value: error,\n    handler: () => {\n      setError(false);\n      window.location.reload();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  })), info && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InfoDialog, {\n    value: info,\n    handler: () => {\n      setInfo(false);\n      window.location.reload();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  })), warning && /*#__PURE__*/React.createElement(Modal, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(WarningDialog, {\n    value: warning,\n    handler: () => {\n      setWarning(false);\n      window.location.reload();\n    },\n    accept: () => {\n      clearNotifications();\n      setWarning(false);\n      window.location.reload();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 25\n    }\n  })));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/pages/Account/components/EditAccount/EditAccount.js"],"names":["React","useState","useEffect","useDispatch","useSelector","api","useForm","Modal","ErrorDialog","InfoDialog","WarningDialog","EditAccount","register","handleSubmit","errors","watch","authKey","state","auth","keys","userData","account","filePayload","setFilePayload","inputFile","setInputFile","loading","setLoading","error","setError","info","setInfo","warning","setWarning","data","setData","handleInputChange","e","file","target","files","size","toFixed","includes","type","URL","createObjectURL","onSubmit","fullname","bio","formData","FormData","append","response","method","url","headers","key","window","location","pathname","clearNotifications","console","log","picture","required","email","maxLength","length","isPartner","reload"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,WAAP,MAAwB,yCAAxB;AACA,OAAOC,UAAP,MAAuB,uCAAvB;AACA,OAAOC,aAAP,MAA0B,6CAA1B;AAEA,OAAO,eAAP;AAEA,eAAe,SAASC,WAAT,GAAuB;AAClC,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA0BC,IAAAA,MAA1B;AAAkCC,IAAAA;AAAlC,MAA4CT,OAAO,EAAzD;AACA,QAAMU,OAAO,GAAGZ,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACC,IAAN,CAAWC,IAArB,CAA3B;AACA,QAAMC,QAAQ,GAAGhB,WAAW,CAACa,KAAK,IAAIA,KAAK,CAACI,OAAN,CAAcD,QAAd,CAAuB,CAAvB,CAAV,CAA5B;AAEA,QAAM,CAACE,WAAD,EAAcC,cAAd,IAAgCtB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACuB,SAAD,EAAYC,YAAZ,IAA4BxB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACyB,OAAD,EAAUC,UAAV,IAAwB1B,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAAC2B,KAAD,EAAQC,QAAR,IAAoB5B,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAAC6B,IAAD,EAAOC,OAAP,IAAkB9B,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAAC+B,OAAD,EAAUC,UAAV,IAAwBhC,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACiC,IAAD,EAAOC,OAAP,IAAkBlC,QAAQ,CAAC,KAAD,CAAhC;;AAEA,QAAMmC,iBAAiB,GAAIC,CAAD,IAAO;AAC7B,UAAMC,IAAI,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;;AAEA,QAAI,CAACF,IAAL,EAAW;AACPT,MAAAA,QAAQ,CAAC,uBAAD,CAAR;AACA,aAAO,KAAK,CAAZ;AACH;;AAED,QAAI,CAAES,IAAI,CAACG,IAAL,GAAU,IAAX,GAAiB,IAAlB,EAAwBC,OAAxB,KAAoC,CAAxC,EAA2C;AACvCb,MAAAA,QAAQ,CAAC,oCAAD,CAAR;AACA,aAAO,KAAK,CAAZ;AACH;;AAED,QAAI,CAAE,CAAC,WAAD,EAAc,YAAd,EAA4Bc,QAA5B,CAAqCL,IAAI,CAACM,IAA1C,CAAN,EAAuD;AACnDf,MAAAA,QAAQ,CAAC,uDAAD,CAAR;AACA,aAAO,KAAK,CAAZ;AACH;;AAEDJ,IAAAA,YAAY,CAACoB,GAAG,CAACC,eAAJ,CAAoBT,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAApB,CAAD,CAAZ;AACAjB,IAAAA,cAAc,CAACe,IAAD,CAAd;AACH,GApBD;;AAsBA,QAAMS,QAAQ,GAAG,OAAO;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAAP,KAA4B;AACzCtB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,UAAMuB,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;;AACA,QAAI;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwB9B,WAAxB;AACA4B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BJ,QAA5B;AACAE,MAAAA,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAuBH,GAAvB;AACA,YAAMI,QAAQ,GAAG,MAAMhD,GAAG,CAAC;AACvBiD,QAAAA,MAAM,EAAE,MADe;AAEvBC,QAAAA,GAAG,EAAE,OAFkB;AAGvBC,QAAAA,OAAO,EAAE;AACL,2BAAkB,UAASxC,OAAO,CAAC,CAAD,CAAP,CAAWyC,GAAI,EADrC;AAEL,0BAAgB;AAFX,SAHc;AAOvBvB,QAAAA,IAAI,EAAEgB;AAPiB,OAAD,CAA1B;AASAG,MAAAA,QAAQ,CAACnB,IAAT,IAAiBH,OAAO,CAAC,mBAAD,CAAxB;AACH,KAdD,CAcE,OAAMM,CAAN,EAAS;AACPqB,MAAAA,MAAM,CAACC,QAAP,CAAgBC,QAAhB,GAA2B,UAA3B;AACH,KAhBD,SAgBU;AACNjC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GAtBD;;AAwBA,QAAMkC,kBAAkB,GAAG,YAAY;AACnClC,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAI;AACA,YAAM0B,QAAQ,GAAG,MAAMhD,GAAG,CAAC;AACvBiD,QAAAA,MAAM,EAAE,QADe;AAEvBC,QAAAA,GAAG,EAAE,OAFkB;AAGvBC,QAAAA,OAAO,EAAE;AACL,2BAAkB,UAASxC,OAAO,CAAC,CAAD,CAAP,CAAWyC,GAAI;AADrC;AAHc,OAAD,CAA1B;AAOAK,MAAAA,OAAO,CAACC,GAAR,CAAYV,QAAQ,CAACnB,IAArB;AACH,KATD,CASE,OAAMG,CAAN,EAAS;AACPyB,MAAAA,OAAO,CAACC,GAAR,CAAY1B,CAAZ;AACH,KAXD,SAWU;AACNV,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GAhBD;;AAkBAzB,EAAAA,SAAS,CAAC,MAAM;AACZiC,IAAAA,OAAO,CAACf,QAAD,CAAP;AACH,GAFQ,EAEP,EAFO,CAAT;AAIA,sBACI,uDACI;AAAM,IAAA,QAAQ,EAAEP,YAAY,CAACkC,QAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CADJ,CADJ,eAII;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CADJ,eAEI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,8BAAjB;AACI,IAAA,OAAO,EAAC,SADZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI;AAAK,IAAA,SAAS,EAAC,uBAAf;AACI,IAAA,GAAG,EAAE,CAACvB,SAAD,GAAaU,IAAI,CAAC8B,OAAlB,GAA4BxC,SADrC;AAEA,IAAA,GAAG,EAAC,iBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,eAOQ;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,GAAG,EAAEZ,QAAQ,EAAhC;AACI,IAAA,QAAQ,EAAEwB,iBADd;AAEJ,IAAA,SAAS,EAAC,yBAFN;AAEgC,IAAA,IAAI,EAAC,SAFrC;AAGJ,IAAA,EAAE,EAAC,SAHC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPR,CAFJ,eAcI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,UAAf;AACI,IAAA,SAAS,EAAC,8BADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,eAGI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,GAAG,EAAExB,QAAQ,CAAC;AAACqD,MAAAA,QAAQ,EAAE;AAAX,KAAD,CAAhC;AACI,IAAA,SAAS,EAAC,eADd;AAC8B,IAAA,YAAY,EAAE/B,IAAI,CAACc,QADjD;AAEA,IAAA,IAAI,EAAC,UAFL;AAEgB,IAAA,EAAE,EAAC,UAFnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CAdJ,eAqBI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,OAAf;AACI,IAAA,SAAS,EAAC,8BADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAGI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,SAAS,EAAC,qBAA7B;AAAmD,IAAA,KAAK,EAAEd,IAAI,CAACgC,KAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,CArBJ,eA0BI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,KAAf;AACI,IAAA,SAAS,EAAC,8BADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,eAGI;AAAU,IAAA,SAAS,EAAC,eAApB;AAAoC,IAAA,IAAI,EAAC,KAAzC;AACI,IAAA,GAAG,EAAEtD,QAAQ,CAAC;AAACuD,MAAAA,SAAS,EAAE;AAAZ,KAAD,CADjB;AACqC,IAAA,YAAY,EAAEjC,IAAI,CAACe,GAAL,KAAa,EAAb,GAAkBf,IAAI,CAACe,GAAvB,GAA6B,IADhF;AAEI,IAAA,WAAW,EAAC,gHAFhB;AAE4G,IAAA,EAAE,EAAC,KAF/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,eAOI;AAAG,IAAA,SAAS,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6BlC,KAAK,CAAC,KAAD,CAAL,GACrBA,KAAK,CAAC,KAAD,CAAL,CAAaqD,MADQ,GACC,EAD9B,CAPJ,CA1BJ,eAoCI;AAAK,IAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,8BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,eAGI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,SAAS,EAAC,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQ1C,OAAO,KAAK,IAAZ,gBAAmB;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACf;AAAK,IAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA1B,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eACe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADf,eAC0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD1B,CADe,CAAnB,gBAKA;AAAG,IAAA,OAAO,EAAE,MAAMO,UAAU,CAAC,iDAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAPR,CAHJ,CApCJ,eAkDI;AAAQ,IAAA,IAAI,EAAC,QAAb;AACA,IAAA,SAAS,EAAC,oBADV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGQP,OAAO,KAAK,IAAZ,gBAAmB;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACf;AAAK,IAAA,KAAK,EAAC,cAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA1B,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eACe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADf,eAC0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAD1B,CADe,CAAnB,gBAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKN,QAAQ,CAACiD,SAAT,KAAuB,IAAvB,GAA8B,WAA9B,GAA4C,UAAjD,CARR,CAlDJ,CAJJ,CADJ,CADJ,EAuEQzC,KAAK,iBACD,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AAAa,IAAA,KAAK,EAAEA,KAApB;AAA2B,IAAA,OAAO,EAAE,MAAK;AACrCC,MAAAA,QAAQ,CAAC,KAAD,CAAR;AACA6B,MAAAA,MAAM,CAACC,QAAP,CAAgBW,MAAhB;AACH,KAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAxEZ,EAgFQxC,IAAI,iBACA,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAEA,IAAnB;AAAyB,IAAA,OAAO,EAAE,MAAM;AACpCC,MAAAA,OAAO,CAAC,KAAD,CAAP;AACA2B,MAAAA,MAAM,CAACC,QAAP,CAAgBW,MAAhB;AACH,KAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAjFZ,EAyFQtC,OAAO,iBACH,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,aAAD;AAAe,IAAA,KAAK,EAAEA,OAAtB;AAA+B,IAAA,OAAO,EAAE,MAAM;AAC1CC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAyB,MAAAA,MAAM,CAACC,QAAP,CAAgBW,MAAhB;AACH,KAHD;AAGG,IAAA,MAAM,EAAE,MAAM;AACbT,MAAAA,kBAAkB;AAClB5B,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAyB,MAAAA,MAAM,CAACC,QAAP,CAAgBW,MAAhB;AACH,KAPD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CA1FZ,CADJ;AAwGH","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api'\nimport { useForm } from 'react-hook-form';\n\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\nimport InfoDialog from '../../../../aux/InfoDialog/InfoDialog';\nimport WarningDialog from '../../../../aux/WarningDialog/WarningDialog';\n\nimport './styles.scss';\n\nexport default function EditAccount() {\n    const { register, handleSubmit, errors, watch } = useForm();\n    const authKey = useSelector(state => state.auth.keys)\n    const userData = useSelector(state => state.account.userData[0])\n    \n    const [filePayload, setFilePayload] = useState(false);\n    const [inputFile, setInputFile] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [info, setInfo] = useState(false);\n    const [warning, setWarning] = useState(false);\n    const [data, setData] = useState(false);\n\n    const handleInputChange = (e) => {\n        const file = e.target.files[0]\n\n        if (!file) {\n            setError('Selecione alguma foto')\n            return void 0\n        }\n        \n        if (((file.size/1024)/1024).toFixed() > 5) {\n            setError('Selecione um arquivo menor que 5MB')\n            return void 0\n        }\n\n        if (!(['image/png', 'image/jpeg'].includes(file.type))){\n            setError('Formato inválido, selecione apenas imagens JPG ou PNG')\n            return void 0\n        }\n\n        setInputFile(URL.createObjectURL(e.target.files[0]))\n        setFilePayload(file)\n    }\n\n    const onSubmit = async ({ fullname, bio}) => {\n        setLoading(true)\n        const formData = new FormData()\n        try {\n            formData.append('file', filePayload)\n            formData.append('fullname', fullname)\n            formData.append('bio', bio)\n            const response = await api({\n                method: 'post',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`,\n                    'Content-Type': 'multipart/form-data'\n                },\n                data: formData\n            })\n            response.data && setInfo('Dados atualizados')\n        } catch(e) {\n            window.location.pathname = '/refresh'\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    const clearNotifications = async () => {\n        setLoading(true)\n        try {\n            const response = await api({\n                method: 'delete',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${authKey[0].key}`\n                },\n            })\n            console.log(response.data)\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false);\n        }\n    }\n\n    useEffect(() => {\n        setData(userData)\n    },[])\n\n    return(\n        <>\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"edit\">\n                    <div className=\"edit__header\">\n                        <p className=\"edit__header--title\">Editar informações pessoais.</p>\n                    </div>\n                    <div className=\"edit__inputs\">\n                        <p className=\"edit__inputs--desc\">Informações públicas da conta.</p>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label className=\"input-label acc-field__title\" \n                                htmlFor=\"picture\">\n                                <img className=\"edit__inputs--picture\" \n                                    src={!inputFile ? data.picture : inputFile} \n                                alt=\"profile picture\"/>\n                            </label>\n                                <input type=\"file\" ref={register()} \n                                    onChange={handleInputChange} \n                            className=\"account-input img-input\" name=\"picture\" \n                            id=\"picture\"/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"fullname\" \n                                className=\"input-label acc-field__title\">Nome Completo</label>\n                            <input type=\"text\" ref={register({required: true})} \n                                className=\"account-input\" defaultValue={data.fullname} \n                            name=\"fullname\" id=\"fullname\"/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"email\" \n                                className=\"input-label acc-field__title\">E-mail</label>\n                            <input type=\"text\" className=\"account-input email\" value={data.email}/>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label htmlFor=\"bio\" \n                                className=\"input-label acc-field__title\">Biografia</label>\n                            <textarea className=\"account-input\" name=\"bio\" \n                                ref={register({maxLength: 350})} defaultValue={data.bio !== '' ? data.bio : null}\n                                placeholder=\"Faça uma breve descrição sobre você e sua experiência com Ikebana, máximo 350 caractéres.\" id=\"bio\">\n                            </textarea>\n                            <p className=\"bio-counter\">{ watch(\"bio\") ? \n                                    watch(\"bio\").length : '' }</p>\n                        </div>\n                        <div className=\"edit__inputs--container acc-field\">\n                            <label className=\"input-label acc-field__title\">\n                            Mensagens</label>\n                            <button type=\"button\" className=\"del-btn\">\n                                {\n                                    loading === true ? <div className=\"sizer\">\n                                        <div class=\"lds-ellipsis\"><div></div>\n                                            <div></div><div></div><div></div></div>\n                                    </div>\n                                    :\n                                    <p onClick={() => setWarning('Deseja realmente excluir todas as notificações?')}>Limpar Notificações</p>\n                                }\n                            </button>\n                        </div>\n                        <button type=\"submit\" \n                        className=\"app-btn btn-filled\">\n                            {\n                                loading === true ? <div className=\"sizer\">\n                                    <div class=\"lds-ellipsis\"><div></div>\n                                        <div></div><div></div><div></div></div>\n                                </div>\n                                :\n                                <p>{ userData.isPartner === true ? 'Atualizar' : 'Concluir' }</p>\n                            }\n                        </button>\n                    </div>\n                </div>\n            </form>\n            {\n                error &&\n                    <Modal>\n                        <ErrorDialog value={error} handler={() =>{\n                            setError(false)\n                            window.location.reload()\n                        } }/>\n                    </Modal>\n            }\n            {\n                info &&\n                    <Modal>\n                        <InfoDialog value={info} handler={() => {\n                            setInfo(false)\n                            window.location.reload()\n                        }}/>\n                    </Modal>\n            }\n            {\n                warning &&\n                    <Modal>\n                        <WarningDialog value={warning} handler={() => {\n                            setWarning(false)\n                            window.location.reload()\n                        }} accept={() => {\n                            clearNotifications()\n                            setWarning(false)\n                            window.location.reload()\n                        }}/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}