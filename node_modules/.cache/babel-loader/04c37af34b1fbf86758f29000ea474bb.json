{"ast":null,"code":"import _regeneratorRuntime from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory,useLocation}from'react-router-dom';import{useForm}from'react-hook-form';import api from'../../../services/api';import Modal from'../../aux/Modal';import ErrorDialog from'../../aux/ErrorDialog/ErrorDialog';import WarningDialog from'../../aux/WarningDialog/WarningDialog';import IndexFooter from'./IndexFooter/IndexFooter';import'./styles.scss';export default function ResetPassword(){var _useForm=useForm(),register=_useForm.register,watch=_useForm.watch,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),warning=_useState6[0],setWarning=_useState6[1];var history=useHistory();var location=useLocation();useEffect(function(){!location.search&&history.goBack();},[]);var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var password,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:password=_ref.password;setLoading(true);_context.prev=2;_context.next=5;return api.post(\"/reset_pass\".concat(location.search),{password:password});case 5:response=_context.sent;setWarning('Senha alterada com sucesso.');_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);setError('Link de confirmação expirado.');case 12:_context.prev=12;setLoading(false);return _context.finish(12);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,9,12,15]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},/*#__PURE__*/React.createElement(\"section\",{className:\"wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"login-main\"},/*#__PURE__*/React.createElement(\"img\",{className:\"ike-logo\",src:\"https://ikebana-app-content.s3-sa-east-1\"+\".amazonaws.com/static/mainlogo.png\",alt:\"logo\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"register-main-info\"},/*#__PURE__*/React.createElement(\"p\",{className:\"register-desc\"},\"Escolha uma nova senha.\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"div\",{className:\"login-main__inputs\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-wrapper\"},/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",name:\"password\",type:\"password\",ref:register({required:true,minLength:6}),placeholder:\"Senha\"}),errors.password&&/*#__PURE__*/React.createElement(\"div\",{title:\"M\\xEDnimo de 6 caracteres\",className:\"validation-overlay\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"error_outline\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-wrapper\"},/*#__PURE__*/React.createElement(\"input\",{className:\"login-input\",name:\"confirm_pass\",type:\"password\",ref:register({required:true,validate:function validate(value){return value===watch('password');}}),placeholder:\"Confirmar senha\"}),errors.confirm_pass&&/*#__PURE__*/React.createElement(\"div\",{title:\"As senhas n\\xE3o coincidem\",className:\"validation-overlay\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"error_outline\")))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"login-btn\"},loading===true?/*#__PURE__*/React.createElement(\"div\",{className:\"sizer\"},/*#__PURE__*/React.createElement(\"div\",{class:\"lds-ellipsis\"},/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null))):/*#__PURE__*/React.createElement(\"p\",null,\"Concluir\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"login-main__spacer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"spacer-h\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"login-main__spacer--text\"},\"OU\"),/*#__PURE__*/React.createElement(\"div\",{className:\"spacer-h\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"login-main__external\"},/*#__PURE__*/React.createElement(\"button\",{className:\"login-google\"},/*#__PURE__*/React.createElement(\"p\",{className:\"login-google--text\"},\"Registrar usando\"),/*#__PURE__*/React.createElement(\"img\",{className:\"google-logo\",src:\"https://image.flaticon.com/icons/svg/281/281764.svg\",alt:\"Google\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"login-main__forgot\"},/*#__PURE__*/React.createElement(\"p\",null,\"Resetar senha\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"login-bottom\"},/*#__PURE__*/React.createElement(\"p\",{className:\"login-bottom--text\"},\"J\\xE1 tem uma conta?\",/*#__PURE__*/React.createElement(\"button\",{className:\"register-btn\"},/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"Entrar\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"get-info\"},\"Em breve...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"login-get-btn\"},/*#__PURE__*/React.createElement(\"button\",{className:\"appstore-btn\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://ikebana-app-content.s3-sa-east-1.amazonaws.com/static/app-store-badge.png\",alt:\"App store\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"playstore-btn\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://play.google.com/intl/pt-BR/badges/static/images/badges/pt-br_badge_web_generic.png\",alt:\"Play store\"})))),/*#__PURE__*/React.createElement(IndexFooter,null)),error&&/*#__PURE__*/React.createElement(Modal,null,/*#__PURE__*/React.createElement(ErrorDialog,{handler:function handler(){return setError(false);},value:error})),warning&&/*#__PURE__*/React.createElement(Modal,null,/*#__PURE__*/React.createElement(WarningDialog,{accept:function accept(){return history.push('/login');},handler:function handler(){return setWarning(false);},value:warning})));}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana_production/src/components/pages/Login/ResetPassword.js"],"names":["React","useState","useEffect","Link","useHistory","useLocation","useForm","api","Modal","ErrorDialog","WarningDialog","IndexFooter","ResetPassword","register","watch","handleSubmit","errors","loading","setLoading","error","setError","warning","setWarning","history","location","search","goBack","onSubmit","password","post","response","required","minLength","validate","value","confirm_pass","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport api from '../../../services/api';\n\nimport Modal from '../../aux/Modal';\nimport ErrorDialog from '../../aux/ErrorDialog/ErrorDialog';\nimport WarningDialog from '../../aux/WarningDialog/WarningDialog';\n\nimport IndexFooter from './IndexFooter/IndexFooter';\n\nimport './styles.scss';\n\nexport default function ResetPassword() {\n    const { register, watch, handleSubmit, errors } = useForm();\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [warning, setWarning] = useState(false);\n    const history = useHistory();\n    const location = useLocation();\n\n    useEffect(() => {\n        !location.search &&  history.goBack()\n    },[])\n\n    const onSubmit = async ({ password }) => {\n        setLoading(true)\n        try {\n            const response = await api.post(`/reset_pass${location.search}`, { password })\n            setWarning('Senha alterada com sucesso.')\n        } catch(e) {\n            setError('Link de confirmação expirado.')\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    return(\n        <>\n            <div className=\"login\">\n                <section className=\"wrapper\">\n                    <div className=\"login-main\">\n                        <img className=\"ike-logo\" \n                            src={\"https://ikebana-app-content.s3-sa-east-1\"+\n                                    \".amazonaws.com/static/mainlogo.png\"} alt=\"logo\"/>\n                        <div className=\"register-main-info\">\n                            <p className=\"register-desc\">Escolha uma nova senha.</p>\n                        </div>\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            <div className=\"login-main__inputs\">\n                                <div className=\"input-wrapper\">\n                                    <input className=\"login-input\" name=\"password\" type=\"password\" \n                                        ref={ register({ required: true, minLength: 6 }) } \n                                        placeholder=\"Senha\"/>\n                                    {errors.password && <div title=\"Mínimo de 6 caracteres\" \n                                        className=\"validation-overlay\">\n                                        <i className=\"material-icons\">error_outline</i></div> }\n                                </div>\n                                <div className=\"input-wrapper\">\n                                    <input className=\"login-input\" name=\"confirm_pass\" type=\"password\" \n                                        ref={ register({ required: true, \n                                            validate: value => value === watch('password') }) } \n                                        placeholder=\"Confirmar senha\"/>\n                                    {errors.confirm_pass && <div title=\"As senhas não coincidem\" \n                                        className=\"validation-overlay\">\n                                        <i className=\"material-icons\">error_outline</i></div> }\n                                </div>\n                            </div>\n                            <button type=\"submit\" className=\"login-btn\">\n                                {\n                                    loading === true ? <div className=\"sizer\">\n                                        <div class=\"lds-ellipsis\"><div></div>\n                                            <div></div><div></div><div></div></div>\n                                    </div>\n                                    :\n                                    <p>Concluir</p>\n                                }\n                            </button>\n                        </form>\n                        <div className=\"login-main__spacer\">\n                            <div className=\"spacer-h\"></div>\n                            <p className=\"login-main__spacer--text\">OU</p>\n                            <div className=\"spacer-h\"></div>\n                        </div>\n                        <div className=\"login-main__external\">\n                            <button className=\"login-google\">\n                                <p className=\"login-google--text\">Registrar usando</p>\n                                <img className=\"google-logo\" \n                                    src=\"https://image.flaticon.com/icons/svg/281/281764.svg\" \n                                    alt=\"Google\" />\n                            </button>\n                        </div>\n                        <div className=\"login-main__forgot\">\n                            <p>Resetar senha</p>\n                        </div>\n                    </div>\n                    <div className=\"login-bottom\">\n                        <p className=\"login-bottom--text\">Já tem uma conta?\n                            <button className=\"register-btn\">\n                                <Link to=\"/login\">Entrar</Link>\n                            </button>\n                        </p>\n                    </div>\n                    <div className=\"get-info\">Em breve...</div>\n                    <div className=\"login-get-btn\">\n                        <button className=\"appstore-btn\">\n                            <img src=\"https://ikebana-app-content.s3-sa-east-1.amazonaws.com/static/app-store-badge.png\" alt=\"App store\" />\n                        </button>\n                        <button className=\"playstore-btn\">\n                            <img src=\"https://play.google.com/intl/pt-BR/badges/static/images/badges/pt-br_badge_web_generic.png\" alt=\"Play store\" />\n                        </button>\n                    </div>\n                </section>\n                <IndexFooter />\n            </div>\n            {\n                error &&\n                    <Modal>\n                        <ErrorDialog handler={() => setError(false)}\n                            value={error}/>\n                    </Modal>\n            }\n            {\n                warning &&\n                    <Modal>\n                        <WarningDialog accept={() => history.push('/login')} \n                        handler={() => setWarning(false)} value={warning}/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}