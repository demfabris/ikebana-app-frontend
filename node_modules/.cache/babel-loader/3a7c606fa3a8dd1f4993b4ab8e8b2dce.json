{"ast":null,"code":"var _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/Dialog/components/ArrangementDialog/ArrangementDialog.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addCart } from 'store/ducks/shop';\nimport Slider from 'react-slick';\nimport api from 'services/api';\nimport Dialog from '../../Dialog';\nimport './styles.scss';\nexport default function ArrangementDialog({\n  handler,\n  projectID\n}) {\n  const authKey = useSelector(state => state.auth.keys);\n  const [loading, setLoading] = useState(true);\n  const [userID, setUserID] = useState(false);\n  const [liked, setLiked] = useState(false);\n  const [likeCount, setLikeCount] = useState(0);\n  const [data, setData] = useState(false); //carousel custom settings\n\n  function SampleNextArrow(props) {\n    const {\n      className,\n      style,\n      onClick\n    } = props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"custom-arrow dialog-next\",\n      style: { ...style,\n        display: \"block\"\n      },\n      onClick: onClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }, \"arrow_forward_ios\"));\n  }\n\n  function SamplePrevArrow(props) {\n    const {\n      className,\n      style,\n      onClick\n    } = props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"custom-arrow dialog-prev\",\n      style: { ...style,\n        display: \"block\"\n      },\n      onClick: onClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"material-icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    }, \"arrow_back_ios\"));\n  }\n\n  const settings = {\n    arrows: true,\n    dots: false,\n    infinite: true,\n    speed: 500,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    nextArrow: /*#__PURE__*/React.createElement(SampleNextArrow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 20\n      }\n    }),\n    prevArrow: /*#__PURE__*/React.createElement(SamplePrevArrow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 20\n      }\n    })\n  }; //end carousel settings\n  //dispatching to cart\n\n  const cart = useSelector(state => state.shop.cart);\n  const dispatch = useDispatch();\n\n  const addToCart = () => {\n    dispatch(addCart({\n      'id': data.project_id,\n      'name': data.name,\n      'imagem': data.pictures.file1\n    }));\n  }; //fetching user_id to check like status\n\n\n  const fetchUsername = async (key = authKey) => {\n    try {\n      const username = await api({\n        method: 'get',\n        url: '/user',\n        headers: {\n          'Authorization': `Bearer ${key[0].key}`\n        }\n      });\n      setUserID(username.data.id);\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setLoading(false);\n    }\n  }; //commiting like to db\n\n\n  const commitLike = async (key = authKey) => {\n    try {\n      const response = await api({\n        method: 'post',\n        url: '/like_project',\n        headers: {\n          'Authorization': `Bearer ${key[0].key}`\n        },\n        data: {\n          project_id: data.project_id\n        }\n      });\n      console.log(response.data);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const fetchProject = async () => {\n    try {\n      const response = await api({\n        method: 'get',\n        url: `/get_project/${projectID}`\n      });\n      setData(response.data);\n    } catch (e) {\n      console.log(e);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchProject();\n    fetchUsername();\n  }, []);\n  return /*#__PURE__*/React.createElement(Dialog, {\n    handler: handler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape__picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Slider, Object.assign({}, settings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-dual-ring\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 33\n    }\n  }) : data.pictures.file1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape__picture--slide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"slide-img\",\n    src: data.pictures.file1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 37\n    }\n  })), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-dual-ring\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 33\n    }\n  }) : data.pictures.file2 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape__picture--slide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"slide-img\",\n    src: data.pictures.file2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 37\n    }\n  })), loading ? /*#__PURE__*/React.createElement(\"div\", {\n    class: \"lds-dual-ring\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 33\n    }\n  }) : data.pictures.file3 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape__picture--slide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"slide-img\",\n    src: data.pictures.file3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape__about\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape__about--header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"arrangement-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }, data.name), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addToCart,\n    className: \"app-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 25\n    }\n  }, \"Solicitar\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape__about--desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-autor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"arrangement-autor__img\",\n    src: data.autor_pic,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"arrangement-autor__name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 29\n    }\n  }, data.autor_fullname, \" \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 90\n    }\n  }, \"-\"))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"arrangement-landscape__about--desc--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }, data.description)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-landscape__about--footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-likes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"arrangement-likes__num\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }, likeCount), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      setLiked(true);\n      commitLike();\n      setLikeCount(likeCount + 1);\n      console.log(likeCount);\n    },\n    className: \"arrangement-likes__like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }\n  }, Object.keys(data.liked_by).includes(userID.toString()) ? /*#__PURE__*/React.createElement(\"i\", {\n    title: \"Curtido\",\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 41\n    }\n  }, \"favorite\") : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 41\n    }\n  }, liked ? 'favorite' : 'favorite_border'))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"app-btn btn-filled arr-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 25\n    }\n  }, \"Aulas\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"arrangement-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }, data.name), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: addToCart,\n    className: \"app-btn order-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 21\n    }\n  }, \"Solicitar\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait__picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Slider, Object.assign({}, settings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 21\n    }\n  }), data.pictures.file1 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait__picture--slide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"slide-img\",\n    src: data.pictures.file1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 37\n    }\n  })), data.pictures.file2 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait__picture--slide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"slide-img\",\n    src: data.pictures.file2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 37\n    }\n  })), data.pictures.file3 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait__picture--slide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"slide-img\",\n    src: data.pictures.file3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait__desc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-autor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"arrangement-autor__img\",\n    src: \"https://ikebana-app-content.s3-sa-east-1.amazonaws.com/static/mainlogo_transparent_notext.png\",\n    alt: \"perfil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"arrangement-autor__name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 25\n    }\n  }, data.autor, \" \", /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 77\n    }\n  }, \"-\"))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"arrangement-portrait__desc--text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, data.description)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait__footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"arrangement-portrait__footer--likes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"arrangement-likes__num\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 25\n    }\n  }, data.likes), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"arrangement-likes__like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 25\n    }\n  }, Object.keys(data.liked_by).includes(userID.toString()) ? /*#__PURE__*/React.createElement(\"i\", {\n    title: \"Curtido\",\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 33\n    }\n  }, \"favorite\") : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 33\n    }\n  }, liked ? 'favorite' : 'favorite_border'))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"app-btn btn-filled lesson-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 21\n    }\n  }, \"Aulas\"))));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/Dialog/components/ArrangementDialog/ArrangementDialog.js"],"names":["React","useState","useEffect","useDispatch","useSelector","addCart","Slider","api","Dialog","ArrangementDialog","handler","projectID","authKey","state","auth","keys","loading","setLoading","userID","setUserID","liked","setLiked","likeCount","setLikeCount","data","setData","SampleNextArrow","props","className","style","onClick","display","SamplePrevArrow","settings","arrows","dots","infinite","speed","slidesToShow","slidesToScroll","nextArrow","prevArrow","cart","shop","dispatch","addToCart","project_id","name","pictures","file1","fetchUsername","key","username","method","url","headers","id","e","console","log","commitLike","response","fetchProject","file2","file3","autor_pic","autor_fullname","description","Object","liked_by","includes","toString","autor","likes"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AAEA,OAAOC,MAAP,MAAmB,cAAnB;AAEA,OAAO,eAAP;AAEA,eAAe,SAASC,iBAAT,CAA2B;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAA3B,EAAmD;AAC9D,QAAMC,OAAO,GAAGR,WAAW,CAACS,KAAK,IAAIA,KAAK,CAACC,IAAN,CAAWC,IAArB,CAA3B;AACA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACiB,MAAD,EAASC,SAAT,IAAsBlB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACmB,KAAD,EAAQC,QAAR,IAAoBpB,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACqB,SAAD,EAAYC,YAAZ,IAA4BtB,QAAQ,CAAC,CAAD,CAA1C;AACA,QAAM,CAACuB,IAAD,EAAOC,OAAP,IAAkBxB,QAAQ,CAAC,KAAD,CAAhC,CAN8D,CAS9D;;AACA,WAASyB,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA,KAAb;AAAoBC,MAAAA;AAApB,QAAgCH,KAAtC;AACA,wBACI;AACI,MAAA,SAAS,EAAE,0BADf;AAEI,MAAA,KAAK,EAAE,EAAE,GAAGE,KAAL;AAAYE,QAAAA,OAAO,EAAE;AAArB,OAFX;AAGI,MAAA,OAAO,EAAED,OAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKI;AAAG,MAAA,KAAK,EAAC,gBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BALJ,CADJ;AASH;;AACD,WAASE,eAAT,CAAyBL,KAAzB,EAAgC;AAC5B,UAAM;AAAEC,MAAAA,SAAF;AAAaC,MAAAA,KAAb;AAAoBC,MAAAA;AAApB,QAAgCH,KAAtC;AACA,wBACI;AACI,MAAA,SAAS,EAAE,0BADf;AAEI,MAAA,KAAK,EAAE,EAAE,GAAGE,KAAL;AAAYE,QAAAA,OAAO,EAAE;AAArB,OAFX;AAGI,MAAA,OAAO,EAAED,OAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKI;AAAG,MAAA,KAAK,EAAC,gBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBALJ,CADJ;AASH;;AACD,QAAMG,QAAQ,GAAG;AACbC,IAAAA,MAAM,EAAE,IADK;AAEbC,IAAAA,IAAI,EAAE,KAFO;AAGbC,IAAAA,QAAQ,EAAE,IAHG;AAIbC,IAAAA,KAAK,EAAE,GAJM;AAKbC,IAAAA,YAAY,EAAE,CALD;AAMbC,IAAAA,cAAc,EAAE,CANH;AAObC,IAAAA,SAAS,eAAE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPE;AAQbC,IAAAA,SAAS,eAAE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AARE,GAAjB,CAlC8D,CA4C9D;AAGA;;AACA,QAAMC,IAAI,GAAGtC,WAAW,CAACS,KAAK,IAAIA,KAAK,CAAC8B,IAAN,CAAWD,IAArB,CAAxB;AACA,QAAME,QAAQ,GAAGzC,WAAW,EAA5B;;AACA,QAAM0C,SAAS,GAAG,MAAM;AACpBD,IAAAA,QAAQ,CAACvC,OAAO,CAAC;AACb,YAAOmB,IAAI,CAACsB,UADC;AAEb,cAAQtB,IAAI,CAACuB,IAFA;AAGb,gBAAUvB,IAAI,CAACwB,QAAL,CAAcC;AAHX,KAAD,CAAR,CAAR;AAKH,GAND,CAlD8D,CA2D9D;;;AACA,QAAMC,aAAa,GAAG,OAAOC,GAAG,GAACvC,OAAX,KAAuB;AACzC,QAAI;AACA,YAAMwC,QAAQ,GAAG,MAAM7C,GAAG,CAAC;AACvB8C,QAAAA,MAAM,EAAE,KADe;AAEvBC,QAAAA,GAAG,EAAE,OAFkB;AAGvBC,QAAAA,OAAO,EAAE;AACL,2BAAkB,UAASJ,GAAG,CAAC,CAAD,CAAH,CAAOA,GAAI;AADjC;AAHc,OAAD,CAA1B;AAOAhC,MAAAA,SAAS,CAACiC,QAAQ,CAAC5B,IAAT,CAAcgC,EAAf,CAAT;AACH,KATD,CASE,OAAMC,CAAN,EAAS;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,KAXD,SAWU;AACNxC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GAfD,CA5D8D,CA8E9D;;;AACA,QAAM2C,UAAU,GAAG,OAAOT,GAAG,GAACvC,OAAX,KAAuB;AACtC,QAAI;AACA,YAAMiD,QAAQ,GAAG,MAAMtD,GAAG,CAAC;AACvB8C,QAAAA,MAAM,EAAE,MADe;AAEvBC,QAAAA,GAAG,EAAE,eAFkB;AAGvBC,QAAAA,OAAO,EAAE;AACL,2BAAkB,UAASJ,GAAG,CAAC,CAAD,CAAH,CAAOA,GAAI;AADjC,SAHc;AAMvB3B,QAAAA,IAAI,EAAE;AACFsB,UAAAA,UAAU,EAAEtB,IAAI,CAACsB;AADf;AANiB,OAAD,CAA1B;AAUAY,MAAAA,OAAO,CAACC,GAAR,CAAYE,QAAQ,CAACrC,IAArB;AACH,KAZD,CAYE,OAAMiC,CAAN,EAAS;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH;AACJ,GAhBD;;AAkBA,QAAMK,YAAY,GAAG,YAAY;AAC7B,QAAI;AACA,YAAMD,QAAQ,GAAG,MAAMtD,GAAG,CAAC;AACvB8C,QAAAA,MAAM,EAAE,KADe;AAEvBC,QAAAA,GAAG,EAAG,gBAAe3C,SAAU;AAFR,OAAD,CAA1B;AAIAc,MAAAA,OAAO,CAACoC,QAAQ,CAACrC,IAAV,CAAP;AACH,KAND,CAME,OAAMiC,CAAN,EAAS;AACPC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACH,KARD,SAQU;AACNxC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GAZD;;AAcAf,EAAAA,SAAS,CAAC,MAAM;AACZ4D,IAAAA,YAAY;AACZZ,IAAAA,aAAa;AAChB,GAHQ,EAGP,EAHO,CAAT;AAMA,sBACI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAExC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD,oBAAYuB,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAEQjB,OAAO,gBACH;AAAK,IAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADG,GAGPQ,IAAI,CAACwB,QAAL,CAAcC,KAAd,iBACI;AAAK,IAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,GAAG,EAAEzB,IAAI,CAACwB,QAAL,CAAcC,KAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CANZ,EAWQjC,OAAO,gBACH;AAAK,IAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADG,GAGPQ,IAAI,CAACwB,QAAL,CAAce,KAAd,iBACI;AAAK,IAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,GAAG,EAAEvC,IAAI,CAACwB,QAAL,CAAce,KAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAfZ,EAoBQ/C,OAAO,gBACH;AAAK,IAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADG,GAGPQ,IAAI,CAACwB,QAAL,CAAcgB,KAAd,iBACI;AAAK,IAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,GAAG,EAAExC,IAAI,CAACwB,QAAL,CAAcgB,KAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAxBZ,CADJ,CADJ,eAgCI;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCxC,IAAI,CAACuB,IAAxC,CADJ,eAEI;AAAQ,IAAA,OAAO,EAAEF,SAAjB;AACI,IAAA,SAAS,EAAC,SADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFJ,CADJ,eAMI;AAAK,IAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,wBAAf;AAAwC,IAAA,GAAG,EAAErB,IAAI,CAACyC,SAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI;AAAG,IAAA,SAAS,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwCzC,IAAI,CAAC0C,cAA7C,oBAA6D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA7D,CAFJ,CADJ,eAKI;AAAG,IAAA,SAAS,EAAC,0CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK1C,IAAI,CAAC2C,WADV,CALJ,CANJ,eAeI;AAAK,IAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,SAAS,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuC7C,SAAvC,CADJ,eAEI;AAAQ,IAAA,OAAO,EAAE,MAAM;AACfD,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACAuC,MAAAA,UAAU;AACVrC,MAAAA,YAAY,CAACD,SAAS,GAAG,CAAb,CAAZ;AACAoC,MAAAA,OAAO,CAACC,GAAR,CAAYrC,SAAZ;AACH,KALL;AAKO,IAAA,SAAS,EAAC,yBALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOQ8C,MAAM,CAACrD,IAAP,CAAYS,IAAI,CAAC6C,QAAjB,EAA2BC,QAA3B,CAAoCpD,MAAM,CAACqD,QAAP,EAApC,iBACI;AAAG,IAAA,KAAK,EAAC,SAAT;AACJ,IAAA,SAAS,EAAC,gBADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,gBAII;AAAG,IAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BnD,KAAK,GAAG,UAAH,GAClC,iBADF,CAXZ,CAFJ,CADJ,eAmBI;AAAQ,IAAA,SAAS,EAAC,4BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAnBJ,CAfJ,CAhCJ,CADJ,eAuEI;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCI,IAAI,CAACuB,IAAxC,CADJ,eAEI;AAAQ,IAAA,OAAO,EAAEF,SAAjB;AACI,IAAA,SAAS,EAAC,mBADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFJ,CADJ,eAMI;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD,oBAAYZ,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAEQT,IAAI,CAACwB,QAAL,CAAcC,KAAd,iBACI;AAAK,IAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,GAAG,EAAEzB,IAAI,CAACwB,QAAL,CAAcC,KAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAHZ,EAQQzB,IAAI,CAACwB,QAAL,CAAce,KAAd,iBACI;AAAK,IAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,GAAG,EAAEvC,IAAI,CAACwB,QAAL,CAAce,KAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CATZ,EAcQvC,IAAI,CAACwB,QAAL,CAAcgB,KAAd,iBACI;AAAK,IAAA,SAAS,EAAC,sCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,GAAG,EAAExC,IAAI,CAACwB,QAAL,CAAcgB,KAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAfZ,CADJ,CANJ,eA4BI;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,wBAAf;AACI,IAAA,GAAG,EAAC,+FADR;AACwG,IAAA,GAAG,EAAC,QAD5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAGI;AAAG,IAAA,SAAS,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwCxC,IAAI,CAACgD,KAA7C,oBAAoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAApD,CAHJ,CADJ,eAMI;AAAG,IAAA,SAAS,EAAC,kCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiDhD,IAAI,CAAC2C,WAAtD,CANJ,CA5BJ,eAoCI;AAAK,IAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,qCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAG,IAAA,SAAS,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuC3C,IAAI,CAACiD,KAA5C,CADJ,eAEI;AAAQ,IAAA,SAAS,EAAC,yBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIL,MAAM,CAACrD,IAAP,CAAYS,IAAI,CAAC6C,QAAjB,EAA2BC,QAA3B,CAAoCpD,MAAM,CAACqD,QAAP,EAApC,iBACI;AAAG,IAAA,KAAK,EAAC,SAAT;AAAmB,IAAA,SAAS,EAAC,gBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,gBAGI;AAAG,IAAA,SAAS,EACZ,gBADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACkBnD,KAAK,GAAG,UAAH,GACrB,iBAFF,CALR,CAFJ,CADJ,eAcI;AAAQ,IAAA,SAAS,EAAC,+BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAdJ,CApCJ,CAvEJ,CADJ;AA+HH","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addCart } from 'store/ducks/shop';\nimport Slider from 'react-slick';\nimport api from 'services/api';\n\nimport Dialog from '../../Dialog';\n\nimport './styles.scss';\n\nexport default function ArrangementDialog({ handler, projectID }) {\n    const authKey = useSelector(state => state.auth.keys)\n    const [loading, setLoading] = useState(true);\n    const [userID, setUserID] = useState(false);\n    const [liked, setLiked] = useState(false)\n    const [likeCount, setLikeCount] = useState(0);\n    const [data, setData] = useState(false);\n\n\n    //carousel custom settings\n    function SampleNextArrow(props) {\n        const { className, style, onClick } = props;\n        return (\n            <div\n                className={\"custom-arrow dialog-next\"}\n                style={{ ...style, display: \"block\" }}\n                onClick={onClick}\n            >\n                <i class=\"material-icons\">arrow_forward_ios</i>\n            </div>\n        );\n    }\n    function SamplePrevArrow(props) {\n        const { className, style, onClick } = props;\n        return (\n            <div\n                className={\"custom-arrow dialog-prev\"}\n                style={{ ...style, display: \"block\" }}\n                onClick={onClick}\n            >\n                <i class=\"material-icons\">arrow_back_ios</i>\n            </div>\n        );\n    }\n    const settings = {\n        arrows: true,\n        dots: false,\n        infinite: true,\n        speed: 500,\n        slidesToShow: 1,\n        slidesToScroll: 1,\n        nextArrow: <SampleNextArrow />,\n        prevArrow: <SamplePrevArrow />\n    };\n    //end carousel settings\n\n\n    //dispatching to cart\n    const cart = useSelector(state => state.shop.cart)\n    const dispatch = useDispatch();\n    const addToCart = () => {\n        dispatch(addCart({\n            'id' : data.project_id,\n            'name': data.name,\n            'imagem': data.pictures.file1,\n        }))\n    }\n\n\n    //fetching user_id to check like status\n    const fetchUsername = async (key=authKey) => {\n        try {\n            const username = await api({\n                method: 'get',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${key[0].key}`\n                },\n            })\n            setUserID(username.data.id)\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n\n    //commiting like to db\n    const commitLike = async (key=authKey) => {\n        try {\n            const response = await api({\n                method: 'post',\n                url: '/like_project',\n                headers: {\n                    'Authorization': `Bearer ${key[0].key}`\n                },\n                data: {\n                    project_id: data.project_id\n                }\n            })\n            console.log(response.data)\n        } catch(e) {\n            console.log(e)\n        } \n    }\n\n    const fetchProject = async () => {\n        try {\n            const response = await api({\n                method: 'get',\n                url: `/get_project/${projectID}`\n            })\n            setData(response.data)\n        } catch(e) {\n            console.log(e)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    useEffect(() => {\n        fetchProject()\n        fetchUsername()\n    },[])\n\n\n    return(\n        <Dialog handler={handler}>\n            <div className=\"arrangement-landscape\">\n                <div className=\"arrangement-landscape__picture\">\n                    <Slider {...settings}>\n                        {\n                            loading ?\n                                <div class=\"lds-dual-ring\"></div>\n                                :\n                            data.pictures.file1 && \n                                <div className=\"arrangement-landscape__picture--slide\">\n                                    <img className=\"slide-img\" src={data.pictures.file1} />\n                                </div>\n                        }\n                        {\n                            loading ?\n                                <div class=\"lds-dual-ring\"></div>\n                                :\n                            data.pictures.file2 && \n                                <div className=\"arrangement-landscape__picture--slide\">\n                                    <img className=\"slide-img\" src={data.pictures.file2} />\n                                </div>\n                        }\n                        {\n                            loading ?\n                                <div class=\"lds-dual-ring\"></div>\n                                :\n                            data.pictures.file3 && \n                                <div className=\"arrangement-landscape__picture--slide\">\n                                    <img className=\"slide-img\" src={data.pictures.file3} />\n                                </div>\n                        }\n                    </Slider>\n                </div>\n                <div className=\"arrangement-landscape__about\">\n                    <div className=\"arrangement-landscape__about--header\">\n                        <h1 className=\"arrangement-title\">{data.name}</h1>\n                        <button onClick={addToCart} \n                            className=\"app-btn\">Solicitar</button>\n                    </div>\n                    <div className=\"arrangement-landscape__about--desc\">\n                        <div className=\"arrangement-autor\">\n                            <img className=\"arrangement-autor__img\" src={data.autor_pic} />\n                            <p className=\"arrangement-autor__name\">{data.autor_fullname} <b>-</b></p>\n                        </div>\n                        <p className=\"arrangement-landscape__about--desc--text\">\n                            {data.description}\n                        </p>\n                    </div>\n                    <div className=\"arrangement-landscape__about--footer\">\n                        <div className=\"arrangement-likes\">\n                            <p className=\"arrangement-likes__num\">{likeCount}</p>\n                            <button onClick={() => {\n                                    setLiked(true)\n                                    commitLike()\n                                    setLikeCount(likeCount + 1)\n                                    console.log(likeCount)\n                                }} className=\"arrangement-likes__like\">\n                                {\n                                    Object.keys(data.liked_by).includes(userID.toString()) ?\n                                        <i title=\"Curtido\" \n                                    className=\"material-icons\">favorite</i>\n                                            :\n                                        <i className=\"material-icons\">{liked ? 'favorite' \n                                        : 'favorite_border'}</i>\n                                }\n                            </button>\n                        </div>\n                        <button className=\"app-btn btn-filled arr-btn\">Aulas</button>\n                    </div>\n                </div>\n            </div>\n            <div className=\"arrangement-portrait\">\n                <div className=\"arrangement-portrait__header\">\n                    <h1 className=\"arrangement-title\">{data.name}</h1>\n                    <button onClick={addToCart} \n                        className=\"app-btn order-btn\">Solicitar</button>\n                </div>\n                <div className=\"arrangement-portrait__picture\">\n                    <Slider {...settings}>\n                        {\n                            data.pictures.file1 && \n                                <div className=\"arrangement-portrait__picture--slide\">\n                                    <img className=\"slide-img\" src={data.pictures.file1} />\n                                </div>\n                        }\n                        {\n                            data.pictures.file2 && \n                                <div className=\"arrangement-portrait__picture--slide\">\n                                    <img className=\"slide-img\" src={data.pictures.file2} />\n                                </div>\n                        }\n                        {\n                            data.pictures.file3 && \n                                <div className=\"arrangement-portrait__picture--slide\">\n                                    <img className=\"slide-img\" src={data.pictures.file3} />\n                                </div>\n                        }\n                    </Slider>\n                </div>\n                <div className=\"arrangement-portrait__desc\">\n                    <div className=\"arrangement-autor\">\n                        <img className=\"arrangement-autor__img\" \n                            src=\"https://ikebana-app-content.s3-sa-east-1.amazonaws.com/static/mainlogo_transparent_notext.png\" alt=\"perfil\" />\n                        <p className=\"arrangement-autor__name\">{data.autor} <b>-</b></p>\n                    </div>\n                    <p className=\"arrangement-portrait__desc--text\">{data.description}</p>\n                </div>\n                <div className=\"arrangement-portrait__footer\">\n                    <div className=\"arrangement-portrait__footer--likes\">\n                        <p className=\"arrangement-likes__num\">{data.likes}</p>\n                        <button className=\"arrangement-likes__like\">\n                        {\n                            Object.keys(data.liked_by).includes(userID.toString()) ?\n                                <i title=\"Curtido\" className=\"material-icons\">favorite</i>\n                                    :\n                                <i className=\n                                \"material-icons\">{liked ? 'favorite' \n                                : 'favorite_border'}</i>\n                        }\n                        </button>\n                    </div>\n                    <button className=\"app-btn btn-filled lesson-btn\">Aulas</button>\n                </div>\n            </div>\n        </Dialog>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}