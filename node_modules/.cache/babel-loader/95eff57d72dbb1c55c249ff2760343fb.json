{"ast":null,"code":"import _slicedToArray from \"/home/fabricio7p/Documents/Projects/Ikebana/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/pages/Account/components/Join/Join.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api';\nimport { useForm } from 'react-hook-form';\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\nimport './styles.scss';\nexport default function Join() {\n  const _useForm = useForm(),\n        register = _useForm.register,\n        handleSubmit = _useForm.handleSubmit,\n        errors = _useForm.errors,\n        watch = _useForm.watch;\n\n  const authKey = useSelector(state => state.auth.keys);\n  const userData = useSelector(state => state.account.userData[0]);\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        loading = _useState2[0],\n        setLoading = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1];\n\n  const _useState5 = useState({}),\n        _useState6 = _slicedToArray(_useState5, 2),\n        data = _useState6[0],\n        setData = _useState6[1];\n\n  const onSubmit = async ({\n    city,\n    tel,\n    personal_address,\n    location,\n    work_address,\n    accept\n  }) => {\n    setLoading(true);\n\n    try {\n      if (accept) {\n        const response = await api({\n          method: 'post',\n          url: '/become_partner',\n          headers: {\n            'Authorization': `Bearer ${authKey[0].key}`\n          },\n          data: {\n            city,\n            tel,\n            personal_address,\n            location,\n            work_address\n          }\n        });\n        response.data.response && alert('Dados atualizados');\n        response.data.success && alert('Você virou membro');\n      }\n    } catch (e) {\n      window.location.pathname = '/refresh';\n    } finally {\n      setLoading(false);\n    }\n  }; //loading user data\n\n\n  useEffect(() => {\n    setData(userData);\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"join\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"join__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"join__header--title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Por favor complete os dados para poder ser um membro do projeto.\")), React.createElement(\"div\", {\n    className: \"join__inputs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"edit__inputs--desc\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Informa\\xE7\\xF5es pessoais.\"), React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"city\",\n    className: \"input-label acc-field__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Cidade\"), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    id: \"city\",\n    name: \"city\",\n    defaultValue: data.city,\n    ref: register({\n      required: true,\n      maxLength: 25\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"tel\",\n    className: \"input-label acc-field__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Telefone\"), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    name: \"tel\",\n    defaultValue: data.tel,\n    ref: register({\n      required: true,\n      maxLength: 15\n    }),\n    id: \"tel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"personal_address\",\n    className: \"input-label acc-field__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Endere\\xE7o\"), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    name: \"personal_address\",\n    defaultValue: data.personal_address,\n    ref: register({\n      required: true\n    }),\n    id: \"personal_address\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  })), React.createElement(\"p\", {\n    className: \"join__inputs--desc\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Informa\\xE7\\xF5es do local que frequenta.\"), React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"location\",\n    className: \"input-label acc-field__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Local\"), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    id: \"location\",\n    name: \"location\",\n    defaultValue: data.location,\n    ref: register({\n      required: true\n    }),\n    placeholder: \"Ex. Johrei Center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"join__inputs--container acc-field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"work_address\",\n    className: \"input-label acc-field__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Endere\\xE7o\"), React.createElement(\"input\", {\n    type: \"text\",\n    className: \"account-input\",\n    id: \"work_address\",\n    name: \"work_address\",\n    defaultValue: data.work_address,\n    ref: register({\n      required: true\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"join__agreement\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"join__agreement--text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Como membro voc\\xEA poder\\xE1 contribuir com o conte\\xFAdo do website, adicionar aulas sobre o m\\xE9todo Sanguetsu e publicar seus arranjos. Tamb\\xE9m poder\\xE1 atender a solicita\\xE7\\xF5es de arranjos de pessoas da sua regi\\xE3o.\"), React.createElement(\"div\", {\n    className: \"join__agreement--check\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, errors.accept && React.createElement(\"i\", {\n    className: \"material-icons\",\n    style: {\n      color: \"red\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"error_outline\"), React.createElement(\"label\", {\n    htmlFor: \"accept\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, userData.isPartner === true ? 'Confirmar atualização' : 'Quero ser membro'), React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: \"accept\",\n    name: \"accept\",\n    ref: register({\n      required: true\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"app-btn btn-filled\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, loading === true ? React.createElement(\"div\", {\n    className: \"sizer\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"lds-ellipsis\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }))) : React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, userData.isPartner === true ? 'Atualizar' : 'Concluir')))))), error && React.createElement(Modal, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(ErrorDialog, {\n    value: error,\n    handler: () => {\n      setError(false);\n      window.location.pathname = '/logout';\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana/front/src/components/pages/Account/components/Join/Join.js"],"names":["React","useEffect","useState","useDispatch","useSelector","api","useForm","Modal","ErrorDialog","Join","register","handleSubmit","errors","watch","authKey","state","auth","keys","userData","account","loading","setLoading","error","setError","data","setData","onSubmit","city","tel","personal_address","location","work_address","accept","response","method","url","headers","key","alert","success","e","window","pathname","required","maxLength","color","isPartner"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport api from 'services/api'\nimport { useForm } from 'react-hook-form';\n\nimport Modal from '../../../../aux/Modal';\nimport ErrorDialog from '../../../../aux/ErrorDialog/ErrorDialog';\n\nimport './styles.scss';\n\nexport default function Join() {\n    const { register, handleSubmit, errors, watch } = useForm();\n    const authKey = useSelector(state => state.auth.keys)\n    const userData = useSelector(state => state.account.userData[0])\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(false);\n    const [data, setData] = useState({})\n\n    const onSubmit = async ({ city, tel, personal_address, location, work_address, accept}) => {\n        setLoading(true)\n        try {\n            if (accept) {\n                const response = await api({\n                    method: 'post',\n                    url: '/become_partner',\n                    headers: {\n                        'Authorization': `Bearer ${authKey[0].key}`\n                    },\n                    data: {\n                        city,\n                        tel,\n                        personal_address,\n                        location,\n                        work_address,\n                    }\n                })\n                response.data.response && alert('Dados atualizados')\n                response.data.success && alert('Você virou membro')\n            }\n        } catch(e) {\n            window.location.pathname = '/refresh'\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    //loading user data\n    useEffect(() => {\n        setData(userData)\n    }, [])\n\n    return(\n        <>\n            <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"join\">\n                    <div className=\"join__header\">\n                        <p className=\"join__header--title\">Por favor complete os dados para poder ser um membro do projeto.</p>\n                    </div>\n                    <div className=\"join__inputs\">\n                        <p className=\"edit__inputs--desc\">Informações pessoais.</p>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"city\" \n                                className=\"input-label acc-field__title\">Cidade</label>\n                            <input type=\"text\" className=\"account-input\" id=\"city\" name=\"city\" \n                                defaultValue={data.city}\n                                ref={ register({ required: true, maxLength: 25 }) }/>\n                        </div>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"tel\" \n                                className=\"input-label acc-field__title\">\n                                Telefone</label>\n                            <input type=\"text\" className=\"account-input\" name=\"tel\" \n                                defaultValue={data.tel}\n                                ref={ register({ required: true, maxLength: 15 }) } \n                                id=\"tel\"/>\n                        </div>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"personal_address\" \n                                className=\"input-label acc-field__title\">\n                                Endereço</label>\n                            <input type=\"text\" className=\"account-input\" name=\"personal_address\" \n                                defaultValue={data.personal_address} ref={ register({ required: true }) }\n                                id=\"personal_address\"/>\n                        </div>\n                        <p className=\"join__inputs--desc\">Informações do local que frequenta.</p>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"location\" \n                                className=\"input-label acc-field__title\">Local</label>\n                            <input type=\"text\" className=\"account-input\" id=\"location\" name=\"location\" \n                                defaultValue={data.location} ref={ register({ required: true }) }\n                                placeholder=\"Ex. Johrei Center\"/>\n                        </div>\n                        <div className=\"join__inputs--container acc-field\">\n                            <label htmlFor=\"work_address\" \n                                className=\"input-label acc-field__title\">\n                                Endereço</label>\n                            <input type=\"text\" className=\"account-input\" id=\"work_address\" name=\"work_address\" \n                                defaultValue={data.work_address} ref={ register({ required: true }) }/>\n                        </div>\n                    </div>\n                    <div className=\"join__agreement\">\n                        <p className=\"join__agreement--text\">Como membro você poderá contribuir com o conteúdo \n                            do website, adicionar aulas sobre o método Sanguetsu e publicar seus arranjos. Também \n                            poderá atender a solicitações de arranjos de pessoas da sua região.</p>\n                        <div className=\"join__agreement--check\">\n                            { errors.accept && <i className=\"material-icons\" style={{color: \"red\"}}>error_outline</i> }\n                            <label htmlFor=\"accept\">{userData.isPartner === true ? 'Confirmar atualização' : 'Quero ser membro'}</label>\n                            <input type=\"checkbox\" id=\"accept\" name=\"accept\" ref={ register({ required: true }) }/>\n                            <button type=\"submit\" className=\"app-btn btn-filled\">\n                                {\n                                    loading === true ? <div className=\"sizer\">\n                                        <div class=\"lds-ellipsis\"><div></div>\n                                            <div></div><div></div><div></div></div>\n                                    </div>\n                                    :\n                                    <p>{ userData.isPartner === true ? 'Atualizar' : 'Concluir' }</p>\n                                }\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </form>\n            {\n                error &&\n                    <Modal>\n                        <ErrorDialog value={error} handler={() =>{\n                            setError(false)\n                            window.location.pathname = '/logout'\n                        } }/>\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}