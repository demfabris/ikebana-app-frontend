{"ast":null,"code":"import _regeneratorRuntime from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fabricio7p/Documents/Projects/Ikebana_production/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory,useLocation,Route,BrowserRouter as Router}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import api from'../../../services/api';import{changeUrl}from'store/ducks/links';import'./styles.scss';import ArrangementWrapper from'../../list_elements/Arrangement/ArrangementWrapper';import LessonWrapper from'../../list_elements/Lesson/LessonWrapper';import MessageWrapper from'../../list_elements/Message/MessageWrapper';import NewWrapper from'../../list_elements/New/NewWrapper';import Modal from'../../aux/Modal';import SettingsDialog from'../../aux/SettingsDialog/SettingsDialog';import ErrorDialog from'../../aux/ErrorDialog/ErrorDialog';import MemberInfo from'./components/MemberInfo';import NotAMemberInfo from'./components/NotAMemberInfo';import NotAMemberTab from'./components/NotAMemberTab';export default function Home(){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var active=useSelector(function(state){return state.links.current.url;});var handleClick=function handleClick(url){dispatch(changeUrl(url));};//Tabs\nvar tabs={'arrangements':ArrangementWrapper,'teaching':LessonWrapper,'messages':MessageWrapper,'new':NewWrapper};var ActiveComponent=tabs[active];//Defaults\nvar defaults=useSelector(function(state){return state.defaults.data;});//Edit Settings\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),settings=_useState6[0],setSettings=_useState6[1];//Data fetching\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),member=_useState10[0],setMember=_useState10[1];var authKey=useSelector(function(state){return state.auth.keys;});var hitApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(key){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return api({method:'get',url:'/user',headers:{'Authorization':\"Bearer \".concat(key[0].key)}});case 3:response=_context.sent;setData(response.data);response.data.isPartner&&setMember(true);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log('refresh');case 11:_context.prev=11;setLoading(false);return _context.finish(11);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,8,11,14]]);}));return function hitApi(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(authKey.length===0){window.location.pathname='/logout';alert('Você precisa entrar para acessar essa página');}else{hitApi(authKey);}},[]);var joinDate=Date.parse(data.createdOn);var created=new Date(joinDate);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-main__header\"},loading?/*#__PURE__*/React.createElement(\"div\",{className:\"lds-dual-ring home-loader\"}):/*#__PURE__*/React.createElement(\"div\",{className:\"profile-main__header--info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"picture-wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-picture picture-overlay\"},/*#__PURE__*/React.createElement(Link,{to:\"/account/edit\",className:\"picture-overlay__text\"},\"Editar foto\")),/*#__PURE__*/React.createElement(\"img\",{className:\"profile-picture\",src:data.picture,alt:\"Profile pic\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-title__email\"},data.email),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-title__fullname\"},data.fullname),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-title__joindate\"},/*#__PURE__*/React.createElement(\"p\",{className:\"profile-title__joindate--text\"},\"Entrou:\",' '+created.getDate(),\"/\",1+created.getMonth(),\"/\",created.getFullYear())),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-title__status\"},member?/*#__PURE__*/React.createElement(\"p\",{className:\"profile-title__status--text\",style:{color:\"green\"}},\"Membro\",/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\",style:{color:\"green\"}},\"check\")):/*#__PURE__*/React.createElement(\"p\",{className:\"profile-title__status--text\",style:{color:\"red\"}},\"Membro\",/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\",style:{color:\"red\"}},\"close\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-main__header--more\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-bio\"},data.bio?/*#__PURE__*/React.createElement(\"p\",{className:\"profile-bio__text\"},data.bio):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",{className:\"profile-bio__text\"},\"Conte-nos sobre voc\\xEA escrevendo um texto de apresenta\\xE7\\xE3o...\"),/*#__PURE__*/React.createElement(Link,{to:\"/account/edit\",className:\"profile-bio__edit\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"edit\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-edit\"},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return setSettings(true);},className:\"profile-edit__btn\"},/*#__PURE__*/React.createElement(\"p\",{className:\"profile-edit__btn--text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"settings\"),\"Configura\\xE7\\xF5es\")))))),member?/*#__PURE__*/React.createElement(MemberInfo,data):/*#__PURE__*/React.createElement(NotAMemberInfo,null),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-line\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"profile-line__list\"},/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return handleClick('arrangements');},className:\"profile-line__list--el \\n                            \".concat(active==='arrangements'?'tab-active':'')},/*#__PURE__*/React.createElement(\"a\",{className:\"profile-tab\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-wrapper\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"local_florist\"),/*#__PURE__*/React.createElement(\"p\",{className:\"profile-tab__text\"},\"Arranjos\")))),/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return handleClick('teaching');},className:\"profile-line__list--el \\n                            \".concat(active==='teaching'?'tab-active':'')},/*#__PURE__*/React.createElement(\"a\",{className:\"profile-tab\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-wrapper\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"class\"),/*#__PURE__*/React.createElement(\"p\",{className:\"profile-tab__text\"},\"Aulas\")))),/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return handleClick('messages');},className:\"profile-line__list--el \\n                            \".concat(active==='messages'?'tab-active':'')},/*#__PURE__*/React.createElement(\"a\",{className:\"profile-tab\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-wrapper\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"notifications\"),/*#__PURE__*/React.createElement(\"p\",{className:\"profile-tab__text\"},\"Notifica\\xE7\\xF5es\")))),/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){return handleClick('new');},className:\"profile-line__list--el \\n                            \".concat(active==='new'?'tab-active':'')},/*#__PURE__*/React.createElement(\"a\",{className:\"profile-tab\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-wrapper\"},/*#__PURE__*/React.createElement(\"i\",{className:\"material-icons\"},\"add_circle\"),/*#__PURE__*/React.createElement(\"p\",{className:\"profile-tab__text\"},\"Criar\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-display\"},member?/*#__PURE__*/React.createElement(ActiveComponent,null):/*#__PURE__*/React.createElement(NotAMemberTab,null))),settings&&/*#__PURE__*/React.createElement(Modal,null,data.is_oauth?/*#__PURE__*/React.createElement(SettingsDialog,{data:{'Tornar-se Membro':'/account/join','Informações':'/account/edit'},handler:function handler(){return setSettings(false);}}):/*#__PURE__*/React.createElement(SettingsDialog,{data:{'Tornar-se Membro':'/account/join','Informações':'/account/edit','Senha':'/account/password'},handler:function handler(){return setSettings(false);}})));}","map":{"version":3,"sources":["/home/fabricio7p/Documents/Projects/Ikebana_production/src/components/pages/Home/Home.js"],"names":["React","useState","useEffect","Link","useHistory","useLocation","Route","BrowserRouter","Router","useSelector","useDispatch","api","changeUrl","ArrangementWrapper","LessonWrapper","MessageWrapper","NewWrapper","Modal","SettingsDialog","ErrorDialog","MemberInfo","NotAMemberInfo","NotAMemberTab","Home","dispatch","error","setError","loading","setLoading","active","state","links","current","url","handleClick","tabs","ActiveComponent","defaults","data","settings","setSettings","setData","member","setMember","authKey","auth","keys","hitApi","key","method","headers","response","isPartner","console","log","length","window","location","pathname","alert","joinDate","Date","parse","createdOn","created","picture","email","fullname","getDate","getMonth","getFullYear","color","bio","is_oauth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link,\n    useHistory,\n    useLocation,\n    Route,\n    BrowserRouter as Router } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport api from '../../../services/api';\nimport { changeUrl } from 'store/ducks/links';\n\nimport './styles.scss';\n\nimport ArrangementWrapper from '../../list_elements/Arrangement/ArrangementWrapper';\nimport LessonWrapper from '../../list_elements/Lesson/LessonWrapper';\nimport MessageWrapper from '../../list_elements/Message/MessageWrapper';\nimport NewWrapper from '../../list_elements/New/NewWrapper';\nimport Modal from '../../aux/Modal';\nimport SettingsDialog from '../../aux/SettingsDialog/SettingsDialog';\nimport ErrorDialog from '../../aux/ErrorDialog/ErrorDialog';\n\nimport MemberInfo from './components/MemberInfo';\nimport NotAMemberInfo from './components/NotAMemberInfo';\nimport NotAMemberTab from './components/NotAMemberTab';\n\nexport default function Home() {\n    const dispatch = useDispatch();\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const active = useSelector(state => state.links.current.url)\n\n    const handleClick = (url) => {\n        dispatch(changeUrl(url))\n    }\n\n    //Tabs\n    const tabs = {\n        'arrangements': ArrangementWrapper,\n        'teaching': LessonWrapper,\n        'messages': MessageWrapper,\n        'new': NewWrapper\n    }\n    const ActiveComponent = tabs[active]\n\n    //Defaults\n    const defaults = useSelector(state => state.defaults.data)\n\n    //Edit Settings\n    const [settings, setSettings] = useState(false);\n\n    //Data fetching\n    const [data, setData] = useState(false);\n    const [member, setMember] = useState(false);\n    const authKey = useSelector(state => state.auth.keys)\n\n    const hitApi = async (key) => {\n        try{\n            const response = await api({\n                method: 'get',\n                url: '/user',\n                headers: {\n                    'Authorization': `Bearer ${key[0].key}`\n                },\n            })\n            setData(response.data)\n            response.data.isPartner && setMember(true)\n        } catch(e){\n            console.log('refresh')\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    useEffect(() => {\n        if (authKey.length === 0) {\n            window.location.pathname = '/logout'\n            alert('Você precisa entrar para acessar essa página')\n        } else {\n            hitApi(authKey)\n        }\n\n    }, [])\n\n    const joinDate = Date.parse(data.createdOn)\n    const created = new Date(joinDate)\n\n    return(\n        <>\n            <div className=\"profile\">\n                <div className=\"profile-main\">\n                    <div className=\"profile-main__header\">\n                    {\n                        loading ?\n                            <div className=\"lds-dual-ring home-loader\"></div>\n                            :\n                        <div className=\"profile-main__header--info\">\n                            <div className=\"picture-wrapper\">\n                                <div className=\"profile-picture picture-overlay\">\n                                    <Link to=\"/account/edit\" \n                                        className=\"picture-overlay__text\">Editar foto</Link>\n                                </div>\n                                    <img className=\"profile-picture\" src={data.picture} \n                                        alt=\"Profile pic\"/>\n                            </div>\n                            <div className=\"profile-title\">\n                                <div className=\"profile-title__email\">{data.email}</div>\n                                <div className=\"profile-title__fullname\">{data.fullname}</div>\n                                <div className=\"profile-title__joindate\">\n                                    <p className=\"profile-title__joindate--text\">\n                                        Entrou: \n                                        {' ' + created.getDate()\n                                        }/{1 + created.getMonth()\n                                        }/{created.getFullYear()}\n                                    </p>\n                                </div>\n                                <div className=\"profile-title__status\">\n                                    {\n                                        member ? \n                                            <p className=\"profile-title__status--text\"\n                                                style={{color: \"green\"}}>Membro\n                                                <i className=\"material-icons\" \n                                                    style={{color: \"green\"}}>check</i>\n                                            </p>\n                                            :\n                                            <p className=\"profile-title__status--text\"\n                                                style={{color: \"red\"}}>Membro\n                                                <i className=\"material-icons\" \n                                                    style={{color: \"red\"}}>close</i>\n                                            </p>\n                                    }\n                                </div>\n                            </div>\n                        </div>\n                        }\n                        <div className=\"profile-main__header--more\">\n                            <div className=\"profile-bio\">\n                                {\n                                    data.bio ?\n                                    <p className=\"profile-bio__text\">\n                                        {data.bio}\n                                    </p>\n                                    :\n                                    <>\n                                        <p className=\"profile-bio__text\">\n                                            Conte-nos sobre você escrevendo um texto de apresentação...\n                                        </p>\n                                        <Link to=\"/account/edit\" className=\"profile-bio__edit\">\n                                            <i className=\"material-icons\">edit</i>\n                                        </Link>\n                                    </>\n                                }\n                            </div>\n                            <div className=\"profile-edit\">\n                                <button onClick={() => setSettings(true)} \n                                    className=\"profile-edit__btn\">\n                                    <p className=\"profile-edit__btn--text\">\n                                        <i className=\"material-icons\">settings</i>\n                                        Configurações\n                                    </p>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {\n                    member ?\n                        <MemberInfo {...data}/>\n                        :\n                        <NotAMemberInfo />\n                }\n                <div className=\"profile-line\">\n                    <ul className=\"profile-line__list\">\n                        <li onClick={() => handleClick('arrangements')}\n                            className={`profile-line__list--el \n                            ${active === 'arrangements' ? 'tab-active' : ''}`}>\n                            <a className=\"profile-tab\">\n                                <div className=\"text-wrapper\">\n                                    <i className=\"material-icons\">local_florist</i>\n                                    <p className=\"profile-tab__text\">Arranjos</p>\n                                </div>\n                            </a>\n                        </li>\n                        <li onClick={() => handleClick('teaching')} \n                            className={`profile-line__list--el \n                            ${active === 'teaching' ? 'tab-active' : ''}`}>\n                            <a className=\"profile-tab\">\n                                <div className=\"text-wrapper\">\n                                    <i className=\"material-icons\">class</i>\n                                    <p className=\"profile-tab__text\">Aulas</p>\n                                </div>\n                            </a>\n                        </li>\n                        <li onClick={() => handleClick('messages')}\n                            className={`profile-line__list--el \n                            ${active === 'messages' ? 'tab-active' : ''}`}>\n                            <a className=\"profile-tab\">\n                                <div className=\"text-wrapper\">\n                                    <i className=\"material-icons\">notifications</i>\n                                    <p className=\"profile-tab__text\">Notificações</p>\n                                </div>\n                            </a>\n                        </li>\n                        <li onClick={() => handleClick('new')} \n                            className={`profile-line__list--el \n                            ${active === 'new' ? 'tab-active' : ''}`}>\n                            <a className=\"profile-tab\">\n                                <div className=\"text-wrapper\">\n                                    <i className=\"material-icons\">add_circle</i>\n                                    <p className=\"profile-tab__text\">Criar</p>\n                                </div>\n                            </a>\n                        </li>\n                    </ul>   \n                </div>\n                <div className=\"profile-display\">\n                    {\n                        member ?\n                            <ActiveComponent />                   \n                            :\n                            <NotAMemberTab/>\n                    }\n                </div>\n            </div>\n            {\n                settings &&\n                    <Modal>\n                        {\n                            data.is_oauth ?\n                                <SettingsDialog data={{\n                                    'Tornar-se Membro': '/account/join',\n                                    'Informações': '/account/edit'\n                                }} handler={() => setSettings(false)}/>\n                                   :\n                                <SettingsDialog data={{\n                                    'Tornar-se Membro': '/account/join',\n                                    'Informações': '/account/edit',\n                                    'Senha': '/account/password'\n                                }} handler={() => setSettings(false)}/>\n                        }\n                    </Modal>\n            }\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}